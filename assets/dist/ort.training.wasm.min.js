/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var ort=(()=>{var yr=Object.defineProperty;var qa=Object.getOwnPropertyDescriptor;var Ja=Object.getOwnPropertyNames;var Xa=Object.prototype.hasOwnProperty;var W=(n,r)=>()=>(n&&(r=n(n=0)),r);var it=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),ut=(n,r)=>{for(var t in r)yr(n,t,{get:r[t],enumerable:!0})},Qa=(n,r,t,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Ja(r))!Xa.call(n,a)&&a!==t&&yr(n,a,{get:()=>r[a],enumerable:!(u=qa(r,a))||u.enumerable});return n};var Ke=n=>Qa(yr({},"__esModule",{value:!0}),n);var Ht,Ze,lt,Ka,Wt,Gt=W(()=>{"use strict";Ht=new Map,Ze=[],lt=(n,r,t)=>{if(r&&typeof r.init=="function"&&typeof r.createInferenceSessionHandler=="function"){let u=Ht.get(n);if(u===void 0)Ht.set(n,{backend:r,priority:t});else{if(u.priority>t)return;if(u.priority===t&&u.backend!==r)throw new Error(`cannot register backend "${n}" using priority ${t}`)}if(t>=0){let a=Ze.indexOf(n);a!==-1&&Ze.splice(a,1);for(let c=0;c<Ze.length;c++)if(Ht.get(Ze[c]).priority<=t){Ze.splice(c,0,n);return}Ze.push(n)}return}throw new TypeError("not a valid backend")},Ka=async n=>{let r=Ht.get(n);if(!r)return"backend not found.";if(r.initialized)return r.backend;if(r.aborted)return r.error;{let t=!!r.initPromise;try{return t||(r.initPromise=r.backend.init(n)),await r.initPromise,r.initialized=!0,r.backend}catch(u){return t||(r.error=`${u}`,r.aborted=!0),r.error}finally{delete r.initPromise}}},Wt=async n=>{let r=n.executionProviders||[],t=r.map(h=>typeof h=="string"?h:h.name),u=t.length===0?Ze:t,a,c=[],l=new Set;for(let h of u){let m=await Ka(h);typeof m=="string"?c.push({name:h,err:m}):(a||(a=m),a===m&&l.add(h))}if(!a)throw new Error(`no available backend found. ERR: ${c.map(h=>`[${h.name}] ${h.err}`).join(", ")}`);for(let{name:h,err:m}of c)t.includes(h)&&console.warn(`removing requested execution provider "${h}" from session options because it is not available: ${m}`);let s=r.filter(h=>l.has(typeof h=="string"?h:h.name));return[a,new Proxy(n,{get:(h,m)=>m==="executionProviders"?s:Reflect.get(h,m)})]}});var wn=W(()=>{"use strict";Gt()});var bn,On=W(()=>{"use strict";bn="1.18.0"});var vn,Ee,wr=W(()=>{"use strict";On();vn="warning",Ee={wasm:{},webgl:{},webgpu:{},versions:{common:bn},set logLevel(n){if(n!==void 0){if(typeof n!="string"||["verbose","info","warning","error","fatal"].indexOf(n)===-1)throw new Error(`Unsupported logging level: ${n}`);vn=n}},get logLevel(){return vn}};Object.defineProperty(Ee,"logLevel",{enumerable:!0})});var j,Tn=W(()=>{"use strict";wr();j=Ee});var _n,En,Sn=W(()=>{"use strict";_n=(n,r)=>{let t=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);t.width=n.dims[3],t.height=n.dims[2];let u=t.getContext("2d");if(u!=null){let a,c;r?.tensorLayout!==void 0&&r.tensorLayout==="NHWC"?(a=n.dims[2],c=n.dims[3]):(a=n.dims[3],c=n.dims[2]);let l=r?.format!==void 0?r.format:"RGB",s=r?.norm,h,m;s===void 0||s.mean===void 0?h=[255,255,255,255]:typeof s.mean=="number"?h=[s.mean,s.mean,s.mean,s.mean]:(h=[s.mean[0],s.mean[1],s.mean[2],0],s.mean[3]!==void 0&&(h[3]=s.mean[3])),s===void 0||s.bias===void 0?m=[0,0,0,0]:typeof s.bias=="number"?m=[s.bias,s.bias,s.bias,s.bias]:(m=[s.bias[0],s.bias[1],s.bias[2],0],s.bias[3]!==void 0&&(m[3]=s.bias[3]));let y=c*a,w=0,O=y,A=y*2,C=-1;l==="RGBA"?(w=0,O=y,A=y*2,C=y*3):l==="RGB"?(w=0,O=y,A=y*2):l==="RBG"&&(w=0,A=y,O=y*2);for(let S=0;S<c;S++)for(let R=0;R<a;R++){let P=(n.data[w++]-m[0])*h[0],F=(n.data[O++]-m[1])*h[1],B=(n.data[A++]-m[2])*h[2],$=C===-1?255:(n.data[C++]-m[3])*h[3];u.fillStyle="rgba("+P+","+F+","+B+","+$+")",u.fillRect(R,S,1,1)}if("toDataURL"in t)return t.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},En=(n,r)=>{let t=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),u;if(t!=null){let a,c,l;r?.tensorLayout!==void 0&&r.tensorLayout==="NHWC"?(a=n.dims[2],c=n.dims[1],l=n.dims[3]):(a=n.dims[3],c=n.dims[2],l=n.dims[1]);let s=r!==void 0&&r.format!==void 0?r.format:"RGB",h=r?.norm,m,y;h===void 0||h.mean===void 0?m=[255,255,255,255]:typeof h.mean=="number"?m=[h.mean,h.mean,h.mean,h.mean]:(m=[h.mean[0],h.mean[1],h.mean[2],255],h.mean[3]!==void 0&&(m[3]=h.mean[3])),h===void 0||h.bias===void 0?y=[0,0,0,0]:typeof h.bias=="number"?y=[h.bias,h.bias,h.bias,h.bias]:(y=[h.bias[0],h.bias[1],h.bias[2],0],h.bias[3]!==void 0&&(y[3]=h.bias[3]));let w=c*a;if(r!==void 0&&(r.format!==void 0&&l===4&&r.format!=="RGBA"||l===3&&r.format!=="RGB"&&r.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let O=4,A=0,C=1,S=2,R=3,P=0,F=w,B=w*2,$=-1;s==="RGBA"?(P=0,F=w,B=w*2,$=w*3):s==="RGB"?(P=0,F=w,B=w*2):s==="RBG"&&(P=0,B=w,F=w*2),u=t.createImageData(a,c);for(let X=0;X<c*a;A+=O,C+=O,S+=O,R+=O,X++)u.data[A]=(n.data[P++]-y[0])*m[0],u.data[C]=(n.data[F++]-y[1])*m[1],u.data[S]=(n.data[B++]-y[2])*m[2],u.data[R]=$===-1?255:(n.data[$++]-y[3])*m[3]}else throw new Error("Can not access image data");return u}});var br,An,Mn,Cn,Pn,Rn=W(()=>{"use strict";$t();br=(n,r)=>{if(n===void 0)throw new Error("Image buffer must be defined");if(r.height===void 0||r.width===void 0)throw new Error("Image height and width must be defined");if(r.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:t,width:u}=r,a=r.norm??{mean:255,bias:0},c,l;typeof a.mean=="number"?c=[a.mean,a.mean,a.mean,a.mean]:c=[a.mean[0],a.mean[1],a.mean[2],a.mean[3]??255],typeof a.bias=="number"?l=[a.bias,a.bias,a.bias,a.bias]:l=[a.bias[0],a.bias[1],a.bias[2],a.bias[3]??0];let s=r.format!==void 0?r.format:"RGBA",h=r.tensorFormat!==void 0&&r.tensorFormat!==void 0?r.tensorFormat:"RGB",m=t*u,y=h==="RGBA"?new Float32Array(m*4):new Float32Array(m*3),w=4,O=0,A=1,C=2,S=3,R=0,P=m,F=m*2,B=-1;s==="RGB"&&(w=3,O=0,A=1,C=2,S=-1),h==="RGBA"?B=m*3:h==="RBG"?(R=0,F=m,P=m*2):h==="BGR"&&(F=0,P=m,R=m*2);for(let X=0;X<m;X++,O+=w,C+=w,A+=w,S+=w)y[R++]=(n[O]+l[0])/c[0],y[P++]=(n[A]+l[1])/c[1],y[F++]=(n[C]+l[2])/c[2],B!==-1&&S!==-1&&(y[B++]=(n[S]+l[3])/c[3]);return h==="RGBA"?new ye("float32",y,[1,4,t,u]):new ye("float32",y,[1,3,t,u])},An=async(n,r)=>{let t=typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement,u=typeof ImageData<"u"&&n instanceof ImageData,a=typeof ImageBitmap<"u"&&n instanceof ImageBitmap,c=typeof n=="string",l,s=r??{},h=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},m=y=>y instanceof HTMLCanvasElement||y instanceof OffscreenCanvas?y.getContext("2d"):null;if(t){let y=h();y.width=n.width,y.height=n.height;let w=m(y);if(w!=null){let O=n.height,A=n.width;if(r!==void 0&&r.resizedHeight!==void 0&&r.resizedWidth!==void 0&&(O=r.resizedHeight,A=r.resizedWidth),r!==void 0){if(s=r,r.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");s.tensorFormat="RGBA",s.height=O,s.width=A}else s.tensorFormat="RGBA",s.height=O,s.width=A;w.drawImage(n,0,0),l=w.getImageData(0,0,A,O).data}else throw new Error("Can not access image data")}else if(u){let y,w;if(r!==void 0&&r.resizedWidth!==void 0&&r.resizedHeight!==void 0?(y=r.resizedHeight,w=r.resizedWidth):(y=n.height,w=n.width),r!==void 0&&(s=r),s.format="RGBA",s.height=y,s.width=w,r!==void 0){let O=h();O.width=w,O.height=y;let A=m(O);if(A!=null)A.putImageData(n,0,0),l=A.getImageData(0,0,w,y).data;else throw new Error("Can not access image data")}else l=n.data}else if(a){if(r===void 0)throw new Error("Please provide image config with format for Imagebitmap");let y=h();y.width=n.width,y.height=n.height;let w=m(y);if(w!=null){let O=n.height,A=n.width;return w.drawImage(n,0,0,A,O),l=w.getImageData(0,0,A,O).data,s.height=O,s.width=A,br(l,s)}else throw new Error("Can not access image data")}else{if(c)return new Promise((y,w)=>{let O=h(),A=m(O);if(!n||!A)return w();let C=new Image;C.crossOrigin="Anonymous",C.src=n,C.onload=()=>{O.width=C.width,O.height=C.height,A.drawImage(C,0,0,O.width,O.height);let S=A.getImageData(0,0,O.width,O.height);s.height=O.height,s.width=O.width,y(br(S.data,s))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(l!==void 0)return br(l,s);throw new Error("Input data provided is not supported - aborted tensor creation")},Mn=(n,r)=>{let{width:t,height:u,download:a,dispose:c}=r,l=[1,u,t,4];return new ye({location:"texture",type:"float32",texture:n,dims:l,download:a,dispose:c})},Cn=(n,r)=>{let{dataType:t,dims:u,download:a,dispose:c}=r;return new ye({location:"gpu-buffer",type:t??"float32",gpuBuffer:n,dims:u,download:a,dispose:c})},Pn=(n,r,t)=>new ye({location:"cpu-pinned",type:n,data:r,dims:t??[r.length]})});var et,_t,xn,In,Dn=W(()=>{"use strict";et=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),_t=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),xn=!1,In=()=>{if(!xn){xn=!0;let n=typeof BigInt64Array<"u"&&BigInt64Array.from,r=typeof BigUint64Array<"u"&&BigUint64Array.from,t=typeof Float16Array<"u"&&Float16Array.from;n&&(et.set("int64",BigInt64Array),_t.set(BigInt64Array,"int64")),r&&(et.set("uint64",BigUint64Array),_t.set(BigUint64Array,"uint64")),t?(et.set("float16",Float16Array),_t.set(Float16Array,"float16")):et.set("float16",Uint16Array)}}});var Fn,Un,Bn=W(()=>{"use strict";$t();Fn=n=>{let r=1;for(let t=0;t<n.length;t++){let u=n[t];if(typeof u!="number"||!Number.isSafeInteger(u))throw new TypeError(`dims[${t}] must be an integer, got: ${u}`);if(u<0)throw new RangeError(`dims[${t}] must be a non-negative integer, got: ${u}`);r*=u}return r},Un=(n,r)=>{switch(n.location){case"cpu":return new ye(n.type,n.data,r);case"cpu-pinned":return new ye({location:"cpu-pinned",data:n.data,type:n.type,dims:r});case"texture":return new ye({location:"texture",texture:n.texture,type:n.type,dims:r});case"gpu-buffer":return new ye({location:"gpu-buffer",gpuBuffer:n.gpuBuffer,type:n.type,dims:r});default:throw new Error(`tensorReshape: tensor location ${n.location} is not supported`)}}});var ye,$t=W(()=>{"use strict";Sn();Rn();Dn();Bn();ye=class{constructor(r,t,u){In();let a,c;if(typeof r=="object"&&"location"in r)switch(this.dataLocation=r.location,a=r.type,c=r.dims,r.location){case"cpu-pinned":{let s=et.get(a);if(!s)throw new TypeError(`unsupported type "${a}" to create tensor from pinned buffer`);if(!(r.data instanceof s))throw new TypeError(`buffer should be of type ${s.name}`);this.cpuData=r.data;break}case"texture":{if(a!=="float32")throw new TypeError(`unsupported type "${a}" to create tensor from texture`);this.gpuTextureData=r.texture,this.downloader=r.download,this.disposer=r.dispose;break}case"gpu-buffer":{if(a!=="float32"&&a!=="float16"&&a!=="int32"&&a!=="int64"&&a!=="uint32"&&a!=="uint8"&&a!=="bool")throw new TypeError(`unsupported type "${a}" to create tensor from gpu buffer`);this.gpuBufferData=r.gpuBuffer,this.downloader=r.download,this.disposer=r.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let s,h;if(typeof r=="string")if(a=r,h=u,r==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");s=t}else{let m=et.get(r);if(m===void 0)throw new TypeError(`Unsupported tensor type: ${r}.`);if(Array.isArray(t)){if(r==="float16"&&m===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");r==="uint64"||r==="int64"?s=m.from(t,BigInt):s=m.from(t)}else if(t instanceof m)s=t;else throw new TypeError(`A ${a} tensor's data must be type of ${m}`)}else if(h=t,Array.isArray(r)){if(r.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let m=typeof r[0];if(m==="string")a="string",s=r;else if(m==="boolean")a="bool",s=Uint8Array.from(r);else throw new TypeError(`Invalid element type of data array: ${m}.`)}else{let m=_t.get(r.constructor);if(m===void 0)throw new TypeError(`Unsupported type for tensor data: ${r.constructor}.`);a=m,s=r}if(h===void 0)h=[s.length];else if(!Array.isArray(h))throw new TypeError("A tensor's dims must be a number array");c=h,this.cpuData=s,this.dataLocation="cpu"}let l=Fn(c);if(this.cpuData&&l!==this.cpuData.length)throw new Error(`Tensor's size(${l}) does not match data length(${this.cpuData.length}).`);this.type=a,this.dims=c,this.size=l}static async fromImage(r,t){return An(r,t)}static fromTexture(r,t){return Mn(r,t)}static fromGpuBuffer(r,t){return Cn(r,t)}static fromPinnedBuffer(r,t,u){return Pn(r,t,u)}toDataURL(r){return _n(this,r)}toImageData(r){return En(this,r)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(r){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,r&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(r){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return Un(this,r)}}});var ce,zt=W(()=>{"use strict";$t();ce=ye});var Or,Ln,ze,je,vr=W(()=>{"use strict";wr();Or=(n,r)=>{(typeof Ee.trace>"u"?!Ee.wasm.trace:!Ee.trace)||console.timeStamp(`${n}::ORT::${r}`)},Ln=(n,r)=>{let t=new Error().stack?.split(/\r\n|\r|\n/g)||[],u=!1;for(let a=0;a<t.length;a++){if(u&&!t[a].includes("TRACE_FUNC")){let c=`FUNC_${n}::${t[a].trim().split(" ")[1]}`;r&&(c+=`::${r}`),Or("CPU",c);return}t[a].includes("TRACE_FUNC")&&(u=!0)}},ze=n=>{(typeof Ee.trace>"u"?!Ee.wasm.trace:!Ee.trace)||Ln("BEGIN",n)},je=n=>{(typeof Ee.trace>"u"?!Ee.wasm.trace:!Ee.trace)||Ln("END",n)}});var jt,kn=W(()=>{"use strict";Gt();zt();vr();jt=class n{constructor(r){this.handler=r}async run(r,t,u){ze();let a={},c={};if(typeof r!="object"||r===null||r instanceof ce||Array.isArray(r))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof t=="object"){if(t===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof ce)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(t.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let m of t){if(typeof m!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(m)===-1)throw new RangeError(`'fetches' contains invalid output name: ${m}.`);a[m]=null}if(typeof u=="object"&&u!==null)c=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else{let m=!1,y=Object.getOwnPropertyNames(t);for(let w of this.outputNames)if(y.indexOf(w)!==-1){let O=t[w];(O===null||O instanceof ce)&&(m=!0,l=!1,a[w]=O)}if(m){if(typeof u=="object"&&u!==null)c=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else c=t}}else if(typeof t<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let m of this.inputNames)if(typeof r[m]>"u")throw new Error(`input '${m}' is missing in 'feeds'.`);if(l)for(let m of this.outputNames)a[m]=null;let s=await this.handler.run(r,a,c),h={};for(let m in s)if(Object.hasOwnProperty.call(s,m)){let y=s[m];y instanceof ce?h[m]=y:h[m]=new ce(y.type,y.data,y.dims)}return je(),h}async release(){return this.handler.dispose()}static async create(r,t,u,a){ze();let c,l={};if(typeof r=="string"){if(c=r,typeof t=="object"&&t!==null)l=t;else if(typeof t<"u")throw new TypeError("'options' must be an object.")}else if(r instanceof Uint8Array){if(c=r,typeof t=="object"&&t!==null)l=t;else if(typeof t<"u")throw new TypeError("'options' must be an object.")}else if(r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer){let y=r,w=0,O=r.byteLength;if(typeof t=="object"&&t!==null)l=t;else if(typeof t=="number"){if(w=t,!Number.isSafeInteger(w))throw new RangeError("'byteOffset' must be an integer.");if(w<0||w>=y.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${y.byteLength}).`);if(O=r.byteLength-w,typeof u=="number"){if(O=u,!Number.isSafeInteger(O))throw new RangeError("'byteLength' must be an integer.");if(O<=0||w+O>y.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${y.byteLength-w}].`);if(typeof a=="object"&&a!==null)l=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(typeof u<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof t<"u")throw new TypeError("'options' must be an object.");c=new Uint8Array(y,w,O)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[s,h]=await Wt(l),m=await s.createInferenceSessionHandler(c,h);return je(),new n(m)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var Nn,Hn=W(()=>{"use strict";kn();Nn=jt});var Wn=W(()=>{"use strict"});var Gn=W(()=>{"use strict"});var $n=W(()=>{"use strict"});var zn=W(()=>{"use strict"});var Za,Yt,jn=W(()=>{"use strict";Gt();zt();Za="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Yt=class n{constructor(r,t,u){this.handler=r,this.hasOptimizerModel=t,this.hasEvalModel=u}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(r,t){let u=r.evalModel||"",a=r.optimizerModel||"",c=t||{},[l,s]=await Wt(c);if(l.createTrainingSessionHandler){let h=await l.createTrainingSessionHandler(r.checkpointState,r.trainModel,u,a,s);return new n(h,!!r.optimizerModel,!!r.evalModel)}else throw new Error(Za)}typeNarrowingForRunStep(r,t,u,a,c){let l={},s={};if(typeof u!="object"||u===null||u instanceof ce||Array.isArray(u))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let h=!0;if(typeof a=="object"){if(a===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(a instanceof ce)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(a)){if(a.length===0)throw new TypeError("'fetches' cannot be an empty array.");h=!1;for(let m of a){if(typeof m!="string")throw new TypeError("'fetches' must be a string array or an object.");if(t.indexOf(m)===-1)throw new RangeError(`'fetches' contains invalid output name: ${m}.`);l[m]=null}if(typeof c=="object"&&c!==null)s=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else{let m=!1,y=Object.getOwnPropertyNames(a);for(let w of t)if(y.indexOf(w)!==-1){let O=a[w];(O===null||O instanceof ce)&&(m=!0,h=!1,l[w]=O)}if(m){if(typeof c=="object"&&c!==null)s=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else s=a}}else if(typeof a<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let m of r)if(typeof u[m]>"u")throw new Error(`input '${m}' is missing in 'feeds'.`);if(h)for(let m of t)l[m]=null;return[l,s]}convertHandlerReturnTypeToMapOfTensors(r){let t={};for(let u in r)if(Object.hasOwnProperty.call(r,u)){let a=r[u];a instanceof ce?t[u]=a:t[u]=new ce(a.type,a.data,a.dims)}return t}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(r,t,u){let[a,c]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,r,t,u),l=await this.handler.runTrainStep(r,a,c);return this.convertHandlerReturnTypeToMapOfTensors(l)}async runOptimizerStep(r){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(r||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(r,t,u){if(this.hasEvalModel){let[a,c]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,r,t,u),l=await this.handler.runEvalStep(r,a,c);return this.convertHandlerReturnTypeToMapOfTensors(l)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(r=!0){return this.handler.getParametersSize(r)}async loadParametersBuffer(r,t=!0){let u=await this.getParametersSize(t);if(r.length!==4*u)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(r,t)}async getContiguousParameters(r=!0){return this.handler.getContiguousParameters(r)}async release(){return this.handler.dispose()}}});var Yn,Vn=W(()=>{"use strict";jn();Yn=Yt});var Tr={};ut(Tr,{InferenceSession:()=>Nn,TRACE:()=>Or,TRACE_FUNC_BEGIN:()=>ze,TRACE_FUNC_END:()=>je,Tensor:()=>ce,TrainingSession:()=>Yn,env:()=>j,registerBackend:()=>lt});var tt=W(()=>{"use strict";wn();Tn();Hn();zt();Wn();Gn();vr();$n();zn();Vn()});var _r={};ut(_r,{createReadStream:()=>Jn,readFile:()=>eo,readFileSync:()=>to});var eo,to,Jn,Er=W(()=>{eo=void 0,to=void 0,Jn=void 0});var Sr={};ut(Sr,{join:()=>ro});var ro,Ar=W(()=>{ro=void 0});var Kn=it((Qn,Mr)=>{"use strict";var Xn=(()=>{var n=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(n||=__filename),function(r={}){var t=r,u,a,c=new Promise((o,d)=>{u=o,a=d}),l=Object.assign({},t),s="./this.program",h=typeof window=="object",m=typeof importScripts=="function",y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",w="",O,A,C;if(y){var S=(Er(),Ke(_r)),R=(Ar(),Ke(Sr));w=m?R.dirname(w)+"/":__dirname+"/",O=(o,d)=>(o=ge(o)?new URL(o):R.normalize(o),S.readFileSync(o,d?void 0:"utf8")),C=o=>(o=O(o,!0),o.buffer||(o=new Uint8Array(o)),o),A=(o,d,p,b=!0)=>{o=ge(o)?new URL(o):R.normalize(o),S.readFile(o,b?void 0:"utf8",(M,I)=>{M?p(M):d(b?I.buffer:I)})},!t.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else(h||m)&&(m?w=self.location.href:typeof document<"u"&&document.currentScript&&(w=document.currentScript.src),n&&(w=n),w.startsWith("blob:")?w="":w=w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1),O=o=>{var d=new XMLHttpRequest;return d.open("GET",o,!1),d.send(null),d.responseText},m&&(C=o=>{var d=new XMLHttpRequest;return d.open("GET",o,!1),d.responseType="arraybuffer",d.send(null),new Uint8Array(d.response)}),A=(o,d,p)=>{var b=new XMLHttpRequest;b.open("GET",o,!0),b.responseType="arraybuffer",b.onload=()=>{b.status==200||b.status==0&&b.response?d(b.response):p()},b.onerror=p,b.send(null)});var P=console.log.bind(console),F=console.error.bind(console);Object.assign(t,l),l=null;var B,$=!1,X,Q,D,re,Ne;function he(){var o=B.buffer;t.HEAP8=X=new Int8Array(o),t.HEAP16=new Int16Array(o),t.HEAPU8=Q=new Uint8Array(o),t.HEAPU16=new Uint16Array(o),t.HEAP32=D=new Int32Array(o),t.HEAPU32=re=new Uint32Array(o),t.HEAPF32=new Float32Array(o),t.HEAPF64=Ne=new Float64Array(o)}var Ye=[],ie=[],ne=[],Ae=0,we=null,H=null;function de(o){throw o="Aborted("+o+")",F(o),$=!0,o=new WebAssembly.RuntimeError(o+". Build with -sASSERTIONS for more info."),a(o),o}var He=o=>o.startsWith("data:application/octet-stream;base64,"),ge=o=>o.startsWith("file://"),Te;if(Te="ort-training-wasm-simd.wasm",!He(Te)){var ue=Te;Te=t.locateFile?t.locateFile(ue,w):w+ue}function ae(o){if(C)return C(o);throw"both async and sync fetching of the wasm failed"}function ht(o){if(h||m){if(typeof fetch=="function"&&!ge(o))return fetch(o,{credentials:"same-origin"}).then(d=>{if(!d.ok)throw`failed to load wasm binary file at '${o}'`;return d.arrayBuffer()}).catch(()=>ae(o));if(A)return new Promise((d,p)=>{A(o,b=>d(new Uint8Array(b)),p)})}return Promise.resolve().then(()=>ae(o))}function Me(o,d,p){return ht(o).then(b=>WebAssembly.instantiate(b,d)).then(p,b=>{F(`failed to asynchronously prepare wasm: ${b}`),de(b)})}function We(o,d){var p=Te;return typeof WebAssembly.instantiateStreaming!="function"||He(p)||ge(p)||y||typeof fetch!="function"?Me(p,o,d):fetch(p,{credentials:"same-origin"}).then(b=>WebAssembly.instantiateStreaming(b,o).then(d,function(M){return F(`wasm streaming compile failed: ${M}`),F("falling back to ArrayBuffer instantiation"),Me(p,o,d)}))}var Ce,De={869736:(o,d,p,b)=>{if(typeof t>"u"||!t.La)return 1;if(o=pe(o>>>0),o.startsWith("./")&&(o=o.substring(2)),o=t.La.get(o),!o)return 2;if(d>>>=0,p>>>=0,d+p>o.byteLength)return 3;try{return Q.set(o.subarray(d,d+p),b>>>0>>>0),0}catch{return 4}}};class Pe{constructor(d){this.Ja=d-24}}var be=0,Ve=0,oe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,se=(o,d,p)=>{d>>>=0;var b=d+p;for(p=d;o[p]&&!(p>=b);)++p;if(16<p-d&&o.buffer&&oe)return oe.decode(o.subarray(d,p));for(b="";d<p;){var M=o[d++];if(M&128){var I=o[d++]&63;if((M&224)==192)b+=String.fromCharCode((M&31)<<6|I);else{var N=o[d++]&63;M=(M&240)==224?(M&15)<<12|I<<6|N:(M&7)<<18|I<<12|N<<6|o[d++]&63,65536>M?b+=String.fromCharCode(M):(M-=65536,b+=String.fromCharCode(55296|M>>10,56320|M&1023))}}else b+=String.fromCharCode(M)}return b},pe=(o,d)=>(o>>>=0)?se(Q,o,d):"",Re=o=>{for(var d=0,p=0;p<o.length;++p){var b=o.charCodeAt(p);127>=b?d++:2047>=b?d+=2:55296<=b&&57343>=b?(d+=4,++p):d+=3}return d},xe=(o,d,p,b)=>{if(p>>>=0,!(0<b))return 0;var M=p;b=p+b-1;for(var I=0;I<o.length;++I){var N=o.charCodeAt(I);if(55296<=N&&57343>=N){var Z=o.charCodeAt(++I);N=65536+((N&1023)<<10)|Z&1023}if(127>=N){if(p>=b)break;d[p++>>>0]=N}else{if(2047>=N){if(p+1>=b)break;d[p++>>>0]=192|N>>6}else{if(65535>=N){if(p+2>=b)break;d[p++>>>0]=224|N>>12}else{if(p+3>=b)break;d[p++>>>0]=240|N>>18,d[p++>>>0]=128|N>>12&63}d[p++>>>0]=128|N>>6&63}d[p++>>>0]=128|N&63}}return d[p>>>0]=0,p-M},Ge=o=>o%4===0&&(o%100!==0||o%400===0),gt=[0,31,60,91,121,152,182,213,244,274,305,335],xt=[0,31,59,90,120,151,181,212,243,273,304,334],Fe=[],ot={},qe=()=>{if(!Je){var o={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},d;for(d in ot)ot[d]===void 0?delete o[d]:o[d]=ot[d];var p=[];for(d in o)p.push(`${d}=${o[d]}`);Je=p}return Je},Je,It=[null,[],[]],Le=[31,29,31,30,31,30,31,31,30,31,30,31],Dt=[31,28,31,30,31,30,31,31,30,31,30,31];function V(o){var d=Array(Re(o)+1);return xe(o,d,0,d.length),d}function yt(o,d,p,b){function M(v,z,J){for(v=typeof v=="number"?v.toString():v||"";v.length<z;)v=J[0]+v;return v}function I(v,z){return M(v,z,"0")}function N(v,z){function J(Tt){return 0>Tt?-1:0<Tt?1:0}var Ue;return(Ue=J(v.getFullYear()-z.getFullYear()))===0&&(Ue=J(v.getMonth()-z.getMonth()))===0&&(Ue=J(v.getDate()-z.getDate())),Ue}function Z(v){switch(v.getDay()){case 0:return new Date(v.getFullYear()-1,11,29);case 1:return v;case 2:return new Date(v.getFullYear(),0,3);case 3:return new Date(v.getFullYear(),0,2);case 4:return new Date(v.getFullYear(),0,1);case 5:return new Date(v.getFullYear()-1,11,31);case 6:return new Date(v.getFullYear()-1,11,30)}}function _e(v){var z=v.Fa;for(v=new Date(new Date(v.Ga+1900,0,1).getTime());0<z;){var J=v.getMonth(),Ue=(Ge(v.getFullYear())?Le:Dt)[J];if(z>Ue-v.getDate())z-=Ue-v.getDate()+1,v.setDate(1),11>J?v.setMonth(J+1):(v.setMonth(0),v.setFullYear(v.getFullYear()+1));else{v.setDate(v.getDate()+z);break}}return J=new Date(v.getFullYear()+1,0,4),z=Z(new Date(v.getFullYear(),0,4)),J=Z(J),0>=N(z,v)?0>=N(J,v)?v.getFullYear()+1:v.getFullYear():v.getFullYear()-1}o>>>=0,d>>>=0,p>>>=0,b>>>=0;var le=re[b+40>>>2>>>0];b={Oa:D[b>>>2>>>0],Na:D[b+4>>>2>>>0],Ha:D[b+8>>>2>>>0],Ka:D[b+12>>>2>>>0],Ia:D[b+16>>>2>>>0],Ga:D[b+20>>>2>>>0],Aa:D[b+24>>>2>>>0],Fa:D[b+28>>>2>>>0],Qa:D[b+32>>>2>>>0],Ma:D[b+36>>>2>>>0],Pa:le?pe(le):""},p=pe(p),le={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var fe in le)p=p.replace(new RegExp(fe,"g"),le[fe]);var vt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),$e="January February March April May June July August September October November December".split(" ");le={"%a":v=>vt[v.Aa].substring(0,3),"%A":v=>vt[v.Aa],"%b":v=>$e[v.Ia].substring(0,3),"%B":v=>$e[v.Ia],"%C":v=>I((v.Ga+1900)/100|0,2),"%d":v=>I(v.Ka,2),"%e":v=>M(v.Ka,2," "),"%g":v=>_e(v).toString().substring(2),"%G":_e,"%H":v=>I(v.Ha,2),"%I":v=>(v=v.Ha,v==0?v=12:12<v&&(v-=12),I(v,2)),"%j":v=>{for(var z=0,J=0;J<=v.Ia-1;z+=(Ge(v.Ga+1900)?Le:Dt)[J++]);return I(v.Ka+z,3)},"%m":v=>I(v.Ia+1,2),"%M":v=>I(v.Na,2),"%n":()=>`
`,"%p":v=>0<=v.Ha&&12>v.Ha?"AM":"PM","%S":v=>I(v.Oa,2),"%t":()=>"	","%u":v=>v.Aa||7,"%U":v=>I(Math.floor((v.Fa+7-v.Aa)/7),2),"%V":v=>{var z=Math.floor((v.Fa+7-(v.Aa+6)%7)/7);if(2>=(v.Aa+371-v.Fa-2)%7&&z++,z)z==53&&(J=(v.Aa+371-v.Fa)%7,J==4||J==3&&Ge(v.Ga)||(z=1));else{z=52;var J=(v.Aa+7-v.Fa-1)%7;(J==4||J==5&&Ge(v.Ga%400-1))&&z++}return I(z,2)},"%w":v=>v.Aa,"%W":v=>I(Math.floor((v.Fa+7-(v.Aa+6)%7)/7),2),"%y":v=>(v.Ga+1900).toString().substring(2),"%Y":v=>v.Ga+1900,"%z":v=>{v=v.Ma;var z=0<=v;return v=Math.abs(v)/60,(z?"+":"-")+("0000"+(v/60*100+v%60)).slice(-4)},"%Z":v=>v.Pa,"%%":()=>"%"},p=p.replace(/%%/g,"\0\0");for(fe in le)p.includes(fe)&&(p=p.replace(new RegExp(fe,"g"),le[fe](b)));return p=p.replace(/\0\0/g,"%"),fe=V(p),fe.length>d?0:(X.set(fe,o>>>0),fe.length-1)}var wt={a:function(o,d,p){o>>>=0;var b=new Pe(o);throw re[b.Ja+16>>>2>>>0]=0,re[b.Ja+4>>>2>>>0]=d>>>0,re[b.Ja+8>>>2>>>0]=p>>>0,be=o,Ve++,be},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(o,d,p){return d>>>=0,Q.copyWithin(o>>>0>>>0,d>>>0,d+(p>>>0)>>>0)},n:function(o,d,p){o=d+2097152>>>0<4194305-!!o?(o>>>0)+4294967296*d:NaN,p>>>=0,o=new Date(1e3*o),D[p>>>2>>>0]=o.getUTCSeconds(),D[p+4>>>2>>>0]=o.getUTCMinutes(),D[p+8>>>2>>>0]=o.getUTCHours(),D[p+12>>>2>>>0]=o.getUTCDate(),D[p+16>>>2>>>0]=o.getUTCMonth(),D[p+20>>>2>>>0]=o.getUTCFullYear()-1900,D[p+24>>>2>>>0]=o.getUTCDay(),D[p+28>>>2>>>0]=(o.getTime()-Date.UTC(o.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(o,d,p){o=d+2097152>>>0<4194305-!!o?(o>>>0)+4294967296*d:NaN,p>>>=0,o=new Date(1e3*o),D[p>>>2>>>0]=o.getSeconds(),D[p+4>>>2>>>0]=o.getMinutes(),D[p+8>>>2>>>0]=o.getHours(),D[p+12>>>2>>>0]=o.getDate(),D[p+16>>>2>>>0]=o.getMonth(),D[p+20>>>2>>>0]=o.getFullYear()-1900,D[p+24>>>2>>>0]=o.getDay(),D[p+28>>>2>>>0]=(Ge(o.getFullYear())?gt:xt)[o.getMonth()]+o.getDate()-1|0,D[p+36>>>2>>>0]=-(60*o.getTimezoneOffset()),d=new Date(o.getFullYear(),6,1).getTimezoneOffset();var b=new Date(o.getFullYear(),0,1).getTimezoneOffset();D[p+32>>>2>>>0]=(d!=b&&o.getTimezoneOffset()==Math.min(b,d))|0},p:function(o){o>>>=0;var d=new Date(D[o+20>>>2>>>0]+1900,D[o+16>>>2>>>0],D[o+12>>>2>>>0],D[o+8>>>2>>>0],D[o+4>>>2>>>0],D[o>>>2>>>0],0),p=D[o+32>>>2>>>0],b=d.getTimezoneOffset(),M=new Date(d.getFullYear(),6,1).getTimezoneOffset(),I=new Date(d.getFullYear(),0,1).getTimezoneOffset(),N=Math.min(I,M);return 0>p?D[o+32>>>2>>>0]=+(M!=I&&N==b):0<p!=(N==b)&&(M=Math.max(I,M),d.setTime(d.getTime()+6e4*((0<p?N:M)-b))),D[o+24>>>2>>>0]=d.getDay(),D[o+28>>>2>>>0]=(Ge(d.getFullYear())?gt:xt)[d.getMonth()]+d.getDate()-1|0,D[o>>>2>>>0]=d.getSeconds(),D[o+4>>>2>>>0]=d.getMinutes(),D[o+8>>>2>>>0]=d.getHours(),D[o+12>>>2>>>0]=d.getDate(),D[o+16>>>2>>>0]=d.getMonth(),D[o+20>>>2>>>0]=d.getYear(),o=d.getTime(),o=isNaN(o)?-1:o/1e3,bt((Ce=o,1<=+Math.abs(Ce)?0<Ce?+Math.floor(Ce/4294967296)>>>0:~~+Math.ceil((Ce-+(~~Ce>>>0))/4294967296)>>>0:0)),o>>>0},l:function(){return-52},m:function(){},t:function(o,d,p,b){p>>>=0,b>>>=0;var M=new Date().getFullYear(),I=new Date(M,0,1),N=new Date(M,6,1);M=I.getTimezoneOffset();var Z=N.getTimezoneOffset();re[o>>>0>>>2>>>0]=60*Math.max(M,Z),D[d>>>0>>>2>>>0]=+(M!=Z),o=_e=>_e.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],I=o(I),N=o(N),Z<M?(xe(I,Q,p,17),xe(N,Q,b,17)):(xe(I,Q,b,17),xe(N,Q,p,17))},d:()=>{de("")},B:function(o,d,p){o>>>=0,d>>>=0,p>>>=0,Fe.length=0;for(var b;b=Q[d++>>>0];){var M=b!=105;M&=b!=112,p+=M&&p%8?4:0,Fe.push(b==112?re[p>>>2>>>0]:b==105?D[p>>>2>>>0]:Ne[p>>>3>>>0]),p+=M?8:4}return De[o](...Fe)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(o){o>>>=0;var d=Q.length;if(4294901760<o)return!1;for(var p=1;4>=p;p*=2){var b=d*(1+.2/p);b=Math.min(b,o+100663296);var M=Math;b=Math.max(o,b);e:{M=(M.min.call(M,4294901760,b+(65536-b%65536)%65536)-B.buffer.byteLength+65535)/65536;try{B.grow(M),he();var I=1;break e}catch{}I=void 0}if(I)return!0}return!1},C:function(o,d){o>>>=0,d>>>=0;var p=0;return qe().forEach((b,M)=>{var I=d+p;for(M=re[o+4*M>>>2>>>0]=I,I=0;I<b.length;++I)X[M++>>>0]=b.charCodeAt(I);X[M>>>0]=0,p+=b.length+1}),0},D:function(o,d){o>>>=0,d>>>=0;var p=qe();re[o>>>2>>>0]=p.length;var b=0;return p.forEach(M=>b+=M.length+1),re[d>>>2>>>0]=b,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(o,d,p,b){d>>>=0,p>>>=0,b>>>=0;for(var M=0,I=0;I<p;I++){var N=re[d>>>2>>>0],Z=re[d+4>>>2>>>0];d+=8;for(var _e=0;_e<Z;_e++){var le=Q[N+_e>>>0],fe=It[o];le===0||le===10?((o===1?P:F)(se(fe,0)),fe.length=0):fe.push(le)}M+=Z}return re[b>>>2>>>0]=M,0},r:yt,c:function(o,d,p,b){return yt(o>>>0,d>>>0,p>>>0,b>>>0)}},U=function(){function o(p){return U=p.exports,U=Ut(),B=U.K,he(),ie.unshift(U.L),Ae--,Ae==0&&(we!==null&&(clearInterval(we),we=null),H&&(p=H,H=null,p())),U}var d={a:wt};if(Ae++,t.instantiateWasm)try{return t.instantiateWasm(d,o)}catch(p){F(`Module.instantiateWasm callback failed with error: ${p}`),a(p)}return We(d,function(p){o(p.instance)}).catch(a),{}}();t._OrtInit=(o,d)=>(t._OrtInit=U.M)(o,d),t._OrtGetLastError=(o,d)=>(t._OrtGetLastError=U.N)(o,d),t._OrtCreateSessionOptions=(o,d,p,b,M,I,N,Z,_e,le)=>(t._OrtCreateSessionOptions=U.O)(o,d,p,b,M,I,N,Z,_e,le),t._OrtAppendExecutionProvider=(o,d)=>(t._OrtAppendExecutionProvider=U.P)(o,d),t._OrtAddFreeDimensionOverride=(o,d,p)=>(t._OrtAddFreeDimensionOverride=U.Q)(o,d,p),t._OrtAddSessionConfigEntry=(o,d,p)=>(t._OrtAddSessionConfigEntry=U.R)(o,d,p),t._OrtReleaseSessionOptions=o=>(t._OrtReleaseSessionOptions=U.S)(o),t._OrtCreateSession=(o,d,p)=>(t._OrtCreateSession=U.T)(o,d,p),t._OrtReleaseSession=o=>(t._OrtReleaseSession=U.U)(o),t._OrtGetInputOutputCount=(o,d,p)=>(t._OrtGetInputOutputCount=U.V)(o,d,p),t._OrtGetInputName=(o,d)=>(t._OrtGetInputName=U.W)(o,d),t._OrtGetOutputName=(o,d)=>(t._OrtGetOutputName=U.X)(o,d),t._OrtFree=o=>(t._OrtFree=U.Y)(o),t._OrtCreateTensor=(o,d,p,b,M,I)=>(t._OrtCreateTensor=U.Z)(o,d,p,b,M,I),t._OrtGetTensorData=(o,d,p,b,M)=>(t._OrtGetTensorData=U._)(o,d,p,b,M),t._OrtReleaseTensor=o=>(t._OrtReleaseTensor=U.$)(o),t._OrtCreateRunOptions=(o,d,p,b)=>(t._OrtCreateRunOptions=U.aa)(o,d,p,b),t._OrtAddRunConfigEntry=(o,d,p)=>(t._OrtAddRunConfigEntry=U.ba)(o,d,p),t._OrtReleaseRunOptions=o=>(t._OrtReleaseRunOptions=U.ca)(o),t._OrtCreateBinding=o=>(t._OrtCreateBinding=U.da)(o),t._OrtBindInput=(o,d,p)=>(t._OrtBindInput=U.ea)(o,d,p),t._OrtBindOutput=(o,d,p,b)=>(t._OrtBindOutput=U.fa)(o,d,p,b),t._OrtClearBoundOutputs=o=>(t._OrtClearBoundOutputs=U.ga)(o),t._OrtReleaseBinding=o=>(t._OrtReleaseBinding=U.ha)(o),t._OrtRunWithBinding=(o,d,p,b,M)=>(t._OrtRunWithBinding=U.ia)(o,d,p,b,M),t._OrtRun=(o,d,p,b,M,I,N,Z)=>(t._OrtRun=U.ja)(o,d,p,b,M,I,N,Z),t._OrtEndProfiling=o=>(t._OrtEndProfiling=U.ka)(o),t._OrtTrainingLoadCheckpoint=(o,d)=>(t._OrtTrainingLoadCheckpoint=U.la)(o,d),t._OrtTrainingReleaseCheckpoint=o=>(t._OrtTrainingReleaseCheckpoint=U.ma)(o),t._OrtTrainingCreateSession=(o,d,p,b,M,I,N,Z)=>(t._OrtTrainingCreateSession=U.na)(o,d,p,b,M,I,N,Z),t._OrtTrainingLazyResetGrad=o=>(t._OrtTrainingLazyResetGrad=U.oa)(o),t._OrtTrainingRunTrainStep=(o,d,p,b,M,I)=>(t._OrtTrainingRunTrainStep=U.pa)(o,d,p,b,M,I),t._OrtTrainingOptimizerStep=(o,d)=>(t._OrtTrainingOptimizerStep=U.qa)(o,d),t._OrtTrainingEvalStep=(o,d,p,b,M,I)=>(t._OrtTrainingEvalStep=U.ra)(o,d,p,b,M,I),t._OrtTrainingGetParametersSize=(o,d,p)=>(t._OrtTrainingGetParametersSize=U.sa)(o,d,p),t._OrtTrainingCopyParametersToBuffer=(o,d,p,b)=>(t._OrtTrainingCopyParametersToBuffer=U.ta)(o,d,p,b),t._OrtTrainingCopyParametersFromBuffer=(o,d,p,b)=>(t._OrtTrainingCopyParametersFromBuffer=U.ua)(o,d,p,b),t._OrtTrainingGetModelInputOutputCount=(o,d,p,b)=>(t._OrtTrainingGetModelInputOutputCount=U.va)(o,d,p,b),t._OrtTrainingGetModelInputOutputName=(o,d,p,b)=>(t._OrtTrainingGetModelInputOutputName=U.wa)(o,d,p,b),t._OrtTrainingReleaseSession=o=>(t._OrtTrainingReleaseSession=U.xa)(o),t._malloc=o=>(t._malloc=U.ya)(o),t._free=o=>(t._free=U.za)(o);var bt=o=>(bt=U.Ba)(o),Ft=o=>(Ft=U.Ca)(o),L=o=>(L=U.Da)(o),Xe=()=>(Xe=U.Ea)();function Ut(){var o=U;o=Object.assign({},o);var d=p=>b=>p(b)>>>0;return o.ya=d(o.ya),o.Da=d(o.Da),o.Ea=(p=>()=>p()>>>0)(o.Ea),o}t.stackSave=()=>Xe(),t.stackRestore=o=>Ft(o),t.stackAlloc=o=>L(o),t.UTF8ToString=pe,t.stringToUTF8=(o,d,p)=>xe(o,Q,d,p),t.lengthBytesUTF8=Re;var ke;H=function o(){ke||Ot(),ke||(H=o)};function Ot(){if(!(0<Ae)){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;){var o=t.preRun.shift();Ye.unshift(o)}for(;0<Ye.length;)Ye.shift()(t);if(!(0<Ae||ke||(ke=!0,t.calledRun=!0,$))){for(;0<ie.length;)ie.shift()(t);for(u(t);0<ne.length;)ne.shift()(t)}}}return Ot(),c}})();typeof Qn=="object"&&typeof Mr=="object"?Mr.exports=Xn:typeof define=="function"&&define.amd&&define([],()=>Xn)});var Zn=it(()=>{});var ea=it(()=>{});var ta={};ut(ta,{cpus:()=>no});var no,ra=W(()=>{no=void 0});var oa=it((aa,Cr)=>{"use strict";var na=(()=>{var n=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(n||=__filename),function(r={}){function t(){return ne.buffer!=de.buffer&&ae(),de}function u(){return ne.buffer!=de.buffer&&ae(),He}function a(){return ne.buffer!=de.buffer&&ae(),ge}function c(){return ne.buffer!=de.buffer&&ae(),Te}function l(){return ne.buffer!=de.buffer&&ae(),ue}var s=r,h,m,y=new Promise((e,i)=>{h=e,m=i}),w=Object.assign({},s),O="./this.program",A=(e,i)=>{throw i},C=typeof window=="object",S=typeof importScripts=="function",R=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",P=s.ENVIRONMENT_IS_PTHREAD||!1,F="";function B(e){return s.locateFile?s.locateFile(e,F):F+e}var $,X,Q;if(R){var D=(Er(),Ke(_r)),re=(Ar(),Ke(Sr));F=S?re.dirname(F)+"/":__dirname+"/",$=(e,i)=>(e=pe(e)?new URL(e):re.normalize(e),D.readFileSync(e,i?void 0:"utf8")),Q=e=>(e=$(e,!0),e.buffer||(e=new Uint8Array(e)),e),X=(e,i,f,g=!0)=>{e=pe(e)?new URL(e):re.normalize(e),D.readFile(e,g?void 0:"utf8",(E,_)=>{E?f(E):i(g?_.buffer:_)})},!s.thisProgram&&1<process.argv.length&&(O=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),A=(e,i)=>{throw process.exitCode=e,i},global.Worker=Zn().Worker}else(C||S)&&(S?F=self.location.href:typeof document<"u"&&document.currentScript&&(F=document.currentScript.src),typeof n<"u"&&n&&(F=n),F.startsWith("blob:")?F="":F=F.substr(0,F.replace(/[?#].*/,"").lastIndexOf("/")+1),R||($=e=>{var i=new XMLHttpRequest;return i.open("GET",e,!1),i.send(null),i.responseText},S&&(Q=e=>{var i=new XMLHttpRequest;return i.open("GET",e,!1),i.responseType="arraybuffer",i.send(null),new Uint8Array(i.response)}),X=(e,i,f)=>{var g=new XMLHttpRequest;g.open("GET",e,!0),g.responseType="arraybuffer",g.onload=()=>{g.status==200||g.status==0&&g.response?i(g.response):f()},g.onerror=f,g.send(null)}));R&&typeof performance>"u"&&(global.performance=ea().performance);var Ne=console.log.bind(console),he=console.error.bind(console);R&&(Ne=(...e)=>D.writeSync(1,e.join(" ")+`
`),he=(...e)=>D.writeSync(2,e.join(" ")+`
`));var Ye=Ne,ie=he;Object.assign(s,w),w=null;var ne,Ae,we=!1,H,de,He,ge,Te,ue;function ae(){var e=ne.buffer;s.HEAP8=de=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=He=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=ge=new Int32Array(e),s.HEAPU32=Te=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=ue=new Float64Array(e)}var ht=16777216;if(P)ne=s.wasmMemory;else if(s.wasmMemory)ne=s.wasmMemory;else if(ne=new WebAssembly.Memory({initial:ht/65536,maximum:65536,shared:!0}),!(ne.buffer instanceof SharedArrayBuffer))throw ie("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),R&&ie("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");ae(),ht=ne.buffer.byteLength;var Me=[],We=[],Ce=[],De=0,Pe=null,be=null;function Ve(){if(De--,De==0&&(Pe!==null&&(clearInterval(Pe),Pe=null),be)){var e=be;be=null,e()}}function oe(e){throw e="Aborted("+e+")",ie(e),we=!0,H=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),m(e),e}var se=e=>e.startsWith("data:application/octet-stream;base64,"),pe=e=>e.startsWith("file://"),Re;Re="ort-wasm-threaded.wasm",se(Re)||(Re=B(Re));function xe(e){if(Q)return Q(e);throw"both async and sync fetching of the wasm failed"}function Ge(e){if(C||S){if(typeof fetch=="function"&&!pe(e))return fetch(e,{credentials:"same-origin"}).then(i=>{if(!i.ok)throw`failed to load wasm binary file at '${e}'`;return i.arrayBuffer()}).catch(()=>xe(e));if(X)return new Promise((i,f)=>{X(e,g=>i(new Uint8Array(g)),f)})}return Promise.resolve().then(()=>xe(e))}function gt(e,i,f){return Ge(e).then(g=>WebAssembly.instantiate(g,i)).then(f,g=>{ie(`failed to asynchronously prepare wasm: ${g}`),oe(g)})}function xt(e,i){var f=Re;return typeof WebAssembly.instantiateStreaming!="function"||se(f)||pe(f)||R||typeof fetch!="function"?gt(f,e,i):fetch(f,{credentials:"same-origin"}).then(g=>WebAssembly.instantiateStreaming(g,e).then(i,function(E){return ie(`wasm streaming compile failed: ${E}`),ie("falling back to ArrayBuffer instantiation"),gt(f,e,i)}))}var Fe,ot={799444:(e,i,f,g)=>{if(typeof s>"u"||!s.bb)return 1;if(e=Z(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.bb.get(e),!e)return 2;if(i>>>=0,f>>>=0,g>>>=0,i+f>e.byteLength)return 3;try{return u().set(e.subarray(i,i+f),g>>>0),0}catch{return 4}}};function qe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var Je=e=>{e.terminate(),e.onmessage=()=>{}},It=e=>{L.Oa.length==0&&(bt(),L.Xa(L.Oa[0]));var i=L.Oa.pop();if(!i)return 6;L.Pa.push(i),L.La[e.Na]=i,i.Na=e.Na;var f={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return R&&i.unref(),i.postMessage(f,e.mb),0},Le=0,Dt=e=>{var i=gr();return e=e(),kt(i),e},V=(e,i,...f)=>Dt(()=>{for(var g=f.length,E=hr(8*g),_=E>>>3,x=0;x<f.length;x++){var ee=f[x];l()[_+x>>>0]=ee}return fn(e,0,g,E,i)});function yt(e){if(P)return V(0,1,e);H=e,0<Le||(L.hb(),s.onExit?.(e),we=!0),A(e,new qe(e))}var wt=e=>{if(H=e,P)throw Ut(e),"unwind";yt(e)};function U(){for(var e=s.numThreads;e--;)bt();Me.unshift(()=>{De++,Ft(()=>Ve())})}function bt(){var e=B("ort-wasm-threaded.worker.js");e=new Worker(e),L.Oa.push(e)}function Ft(e){P?e():Promise.all(L.Oa.map(L.Xa)).then(e)}var L={Oa:[],Pa:[],ab:[],La:{},Va(){P?(L.receiveObjectTransfer=L.fb,L.threadInitTLS=L.$a,L.setExitStatus=L.Za):U()},Za:e=>H=e,pb:["$terminateWorker"],hb:()=>{for(var e of L.Pa)Je(e);for(e of L.Oa)Je(e);L.Oa=[],L.Pa=[],L.La=[]},Ya:e=>{var i=e.Na;delete L.La[i],L.Oa.push(e),L.Pa.splice(L.Pa.indexOf(e),1),e.Na=0,pr(i)},fb(){},$a(){L.ab.forEach(e=>e())},Xa:e=>new Promise(i=>{e.onmessage=_=>{_=_.data;var x=_.cmd;if(_.targetThread&&_.targetThread!=Lt()){var ee=L.La[_.targetThread];ee?ee.postMessage(_,_.transferList):ie(`Internal error! Worker sent a message "${x}" to target pthread ${_.targetThread}, but that thread no longer exists!`)}else x==="checkMailbox"?Bt():x==="spawnThread"?It(_):x==="cleanupThread"?L.Ya(L.La[_.thread]):x==="killThread"?(_=_.thread,x=L.La[_],delete L.La[_],Je(x),pr(_),L.Pa.splice(L.Pa.indexOf(x),1),x.Na=0):x==="cancelThread"?L.La[_.thread].postMessage({cmd:"cancel"}):x==="loaded"?(e.loaded=!0,R&&!e.Na&&e.unref(),i(e)):x==="alert"?alert(`Thread ${_.threadId}: ${_.text}`):_.target==="setimmediate"?e.postMessage(_):x==="callHandler"?s[_.handler](..._.args):x&&ie(`worker sent an unknown command ${x}`)},e.onerror=_=>{throw ie(`worker sent an error! ${_.filename}:${_.lineno}: ${_.message}`),_},R&&(e.on("message",_=>e.onmessage({data:_})),e.on("error",_=>e.onerror(_)));var f=[],g=["onExit"],E;for(E of g)s.hasOwnProperty(E)&&f.push(E);e.postMessage({cmd:"load",handlers:f,urlOrBlob:s.mainScriptUrlOrBlob||n,wasmMemory:ne,wasmModule:Ae})})};s.PThread=L;var Xe=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=Lt(),i=c()[e+52>>>2>>>0];e=c()[e+56>>>2>>>0],pn(i,i-e),kt(i)};function Ut(e){if(P)return V(1,0,e);wt(e)}var ke=[],Ot;s.invokeEntryPoint=(e,i)=>{Le=0;var f=ke[e];f||(e>=ke.length&&(ke.length=e+1),ke[e]=f=Ot.get(e)),e=f(i),0<Le?L.Za(e):mr(e)};class o{constructor(i){this.Ua=i-24}Va(i,f){c()[this.Ua+16>>>2>>>0]=0,c()[this.Ua+4>>>2>>>0]=i,c()[this.Ua+8>>>2>>>0]=f}}var d=0,p=0;function b(e,i,f,g){return P?V(2,1,e,i,f,g):M(e,i,f,g)}function M(e,i,f,g){if(e>>>=0,i>>>=0,f>>>=0,g>>>=0,typeof SharedArrayBuffer>"u")return ie("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var E=[];return P&&E.length===0?b(e,i,f,g):(e={gb:f,Na:e,cb:g,mb:E},P?(e.ob="spawnThread",postMessage(e,E),0):It(e))}var I=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,N=(e,i,f)=>{i>>>=0;var g=i+f;for(f=i;e[f]&&!(f>=g);)++f;if(16<f-i&&e.buffer&&I)return I.decode(e.buffer instanceof SharedArrayBuffer?e.slice(i,f):e.subarray(i,f));for(g="";i<f;){var E=e[i++];if(E&128){var _=e[i++]&63;if((E&224)==192)g+=String.fromCharCode((E&31)<<6|_);else{var x=e[i++]&63;E=(E&240)==224?(E&15)<<12|_<<6|x:(E&7)<<18|_<<12|x<<6|e[i++]&63,65536>E?g+=String.fromCharCode(E):(E-=65536,g+=String.fromCharCode(55296|E>>10,56320|E&1023))}}else g+=String.fromCharCode(E)}return g},Z=(e,i)=>(e>>>=0)?N(u(),e,i):"";function _e(e,i,f){return P?V(3,1,e,i,f):0}function le(e,i){if(P)return V(4,1,e,i)}var fe=e=>{for(var i=0,f=0;f<e.length;++f){var g=e.charCodeAt(f);127>=g?i++:2047>=g?i+=2:55296<=g&&57343>=g?(i+=4,++f):i+=3}return i},vt=(e,i,f,g)=>{if(f>>>=0,!(0<g))return 0;var E=f;g=f+g-1;for(var _=0;_<e.length;++_){var x=e.charCodeAt(_);if(55296<=x&&57343>=x){var ee=e.charCodeAt(++_);x=65536+((x&1023)<<10)|ee&1023}if(127>=x){if(f>=g)break;i[f++>>>0]=x}else{if(2047>=x){if(f+1>=g)break;i[f++>>>0]=192|x>>6}else{if(65535>=x){if(f+2>=g)break;i[f++>>>0]=224|x>>12}else{if(f+3>=g)break;i[f++>>>0]=240|x>>18,i[f++>>>0]=128|x>>12&63}i[f++>>>0]=128|x>>6&63}i[f++>>>0]=128|x&63}}return i[f>>>0]=0,f-E},$e=(e,i,f)=>vt(e,u(),i,f);function v(e,i){if(P)return V(5,1,e,i)}function z(e,i,f){if(P)return V(6,1,e,i,f)}function J(e,i,f){return P?V(7,1,e,i,f):0}function Ue(e,i){if(P)return V(8,1,e,i)}function Tt(e,i,f){if(P)return V(9,1,e,i,f)}function Gr(e,i,f,g){if(P)return V(10,1,e,i,f,g)}function $r(e,i,f,g){if(P)return V(11,1,e,i,f,g)}function zr(e,i,f,g){if(P)return V(12,1,e,i,f,g)}function jr(e){if(P)return V(13,1,e)}function Yr(e,i){if(P)return V(14,1,e,i)}function Vr(e,i,f){if(P)return V(15,1,e,i,f)}function ur(e){e>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(a(),e>>>2,e).value.then(Bt),e+=128,Atomics.store(a(),e>>>2,1))}s.__emscripten_thread_mailbox_await=ur;var Bt=()=>{var e=Lt();if(e&&(ur(e),e=cn,!we))try{if(e(),!(0<Le))try{P?mr(H):wt(H)}catch(i){i instanceof qe||i=="unwind"||A(1,i)}}catch(i){i instanceof qe||i=="unwind"||A(1,i)}};s.checkMailbox=Bt;var lr=[],st=e=>e%4===0&&(e%100!==0||e%400===0),qr=[0,31,60,91,121,152,182,213,244,274,305,335],Jr=[0,31,59,90,120,151,181,212,243,273,304,334];function Xr(e,i,f,g,E,_,x,ee){return P?V(16,1,e,i,f,g,E,_,x,ee):-52}function Qr(e,i,f,g,E,_,x){if(P)return V(17,1,e,i,f,g,E,_,x)}var fr=[],cr={},Kr=()=>{if(!dr){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:O||"./this.program"},i;for(i in cr)cr[i]===void 0?delete e[i]:e[i]=cr[i];var f=[];for(i in e)f.push(`${i}=${e[i]}`);dr=f}return dr},dr;function Zr(e,i){if(P)return V(18,1,e,i);e>>>=0,i>>>=0;var f=0;return Kr().forEach((g,E)=>{var _=i+f;for(E=c()[e+4*E>>>2>>>0]=_,_=0;_<g.length;++_)t()[E++>>>0]=g.charCodeAt(_);t()[E>>>0]=0,f+=g.length+1}),0}function en(e,i){if(P)return V(19,1,e,i);e>>>=0,i>>>=0;var f=Kr();c()[e>>>2>>>0]=f.length;var g=0;return f.forEach(E=>g+=E.length+1),c()[i>>>2>>>0]=g,0}function tn(e){return P?V(20,1,e):52}function rn(e,i,f,g){return P?V(21,1,e,i,f,g):52}function nn(e,i,f,g,E){return P?V(22,1,e,i,f,g,E):70}var Ga=[null,[],[]];function an(e,i,f,g){if(P)return V(23,1,e,i,f,g);i>>>=0,f>>>=0,g>>>=0;for(var E=0,_=0;_<f;_++){var x=c()[i>>>2>>>0],ee=c()[i+4>>>2>>>0];i+=8;for(var Be=0;Be<ee;Be++){var me=u()[x+Be>>>0],Oe=Ga[e];me===0||me===10?((e===1?Ye:ie)(N(Oe,0)),Oe.length=0):Oe.push(me)}E+=ee}return c()[g>>>2>>>0]=E,0}var on=[31,29,31,30,31,30,31,31,30,31,30,31],sn=[31,28,31,30,31,30,31,31,30,31,30,31];function $a(e){var i=Array(fe(e)+1);return vt(e,i,0,i.length),i}var za=(e,i)=>{t().set(e,i>>>0)};function un(e,i,f,g){function E(T,Y,te){for(T=typeof T=="number"?T.toString():T||"";T.length<Y;)T=te[0]+T;return T}function _(T,Y){return E(T,Y,"0")}function x(T,Y){function te(yn){return 0>yn?-1:0<yn?1:0}var Qe;return(Qe=te(T.getFullYear()-Y.getFullYear()))===0&&(Qe=te(T.getMonth()-Y.getMonth()))===0&&(Qe=te(T.getDate()-Y.getDate())),Qe}function ee(T){switch(T.getDay()){case 0:return new Date(T.getFullYear()-1,11,29);case 1:return T;case 2:return new Date(T.getFullYear(),0,3);case 3:return new Date(T.getFullYear(),0,2);case 4:return new Date(T.getFullYear(),0,1);case 5:return new Date(T.getFullYear()-1,11,31);case 6:return new Date(T.getFullYear()-1,11,30)}}function Be(T){var Y=T.Qa;for(T=new Date(new Date(T.Ra+1900,0,1).getTime());0<Y;){var te=T.getMonth(),Qe=(st(T.getFullYear())?on:sn)[te];if(Y>Qe-T.getDate())Y-=Qe-T.getDate()+1,T.setDate(1),11>te?T.setMonth(te+1):(T.setMonth(0),T.setFullYear(T.getFullYear()+1));else{T.setDate(T.getDate()+Y);break}}return te=new Date(T.getFullYear()+1,0,4),Y=ee(new Date(T.getFullYear(),0,4)),te=ee(te),0>=x(Y,T)?0>=x(te,T)?T.getFullYear()+1:T.getFullYear():T.getFullYear()-1}e>>>=0,i>>>=0,f>>>=0,g>>>=0;var me=c()[g+40>>>2>>>0];g={kb:a()[g>>>2>>>0],jb:a()[g+4>>>2>>>0],Sa:a()[g+8>>>2>>>0],Wa:a()[g+12>>>2>>>0],Ta:a()[g+16>>>2>>>0],Ra:a()[g+20>>>2>>>0],Ma:a()[g+24>>>2>>>0],Qa:a()[g+28>>>2>>>0],qb:a()[g+32>>>2>>>0],ib:a()[g+36>>>2>>>0],lb:me?Z(me):""},f=Z(f),me={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Oe in me)f=f.replace(new RegExp(Oe,"g"),me[Oe]);var hn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),gn="January February March April May June July August September October November December".split(" ");me={"%a":T=>hn[T.Ma].substring(0,3),"%A":T=>hn[T.Ma],"%b":T=>gn[T.Ta].substring(0,3),"%B":T=>gn[T.Ta],"%C":T=>_((T.Ra+1900)/100|0,2),"%d":T=>_(T.Wa,2),"%e":T=>E(T.Wa,2," "),"%g":T=>Be(T).toString().substring(2),"%G":Be,"%H":T=>_(T.Sa,2),"%I":T=>(T=T.Sa,T==0?T=12:12<T&&(T-=12),_(T,2)),"%j":T=>{for(var Y=0,te=0;te<=T.Ta-1;Y+=(st(T.Ra+1900)?on:sn)[te++]);return _(T.Wa+Y,3)},"%m":T=>_(T.Ta+1,2),"%M":T=>_(T.jb,2),"%n":()=>`
`,"%p":T=>0<=T.Sa&&12>T.Sa?"AM":"PM","%S":T=>_(T.kb,2),"%t":()=>"	","%u":T=>T.Ma||7,"%U":T=>_(Math.floor((T.Qa+7-T.Ma)/7),2),"%V":T=>{var Y=Math.floor((T.Qa+7-(T.Ma+6)%7)/7);if(2>=(T.Ma+371-T.Qa-2)%7&&Y++,Y)Y==53&&(te=(T.Ma+371-T.Qa)%7,te==4||te==3&&st(T.Ra)||(Y=1));else{Y=52;var te=(T.Ma+7-T.Qa-1)%7;(te==4||te==5&&st(T.Ra%400-1))&&Y++}return _(Y,2)},"%w":T=>T.Ma,"%W":T=>_(Math.floor((T.Qa+7-(T.Ma+6)%7)/7),2),"%y":T=>(T.Ra+1900).toString().substring(2),"%Y":T=>T.Ra+1900,"%z":T=>{T=T.ib;var Y=0<=T;return T=Math.abs(T)/60,(Y?"+":"-")+("0000"+(T/60*100+T%60)).slice(-4)},"%Z":T=>T.lb,"%%":()=>"%"},f=f.replace(/%%/g,"\0\0");for(Oe in me)f.includes(Oe)&&(f=f.replace(new RegExp(Oe,"g"),me[Oe](g)));return f=f.replace(/\0\0/g,"%"),Oe=$a(f),Oe.length>i?0:(za(Oe,e),Oe.length-1)}L.Va();var ja=[yt,Ut,b,_e,le,v,z,J,Ue,Tt,Gr,$r,zr,jr,Yr,Vr,Xr,Qr,Zr,en,tn,rn,nn,an],Ya={b:function(e,i,f){throw e>>>=0,new o(e).Va(i>>>0,f>>>0),d=e,p++,d},L:function(e){ln(e>>>0,!S,1,!C,131072,!1),L.$a()},j:function(e){e>>>=0,P?postMessage({cmd:"cleanupThread",thread:e}):L.Ya(L.La[e])},H:M,h:_e,S:le,D:v,F:z,T:J,Q:Ue,J:Tt,P:Gr,n:$r,E:zr,B:jr,R:Yr,C:Vr,p:()=>1,z:function(e,i){e>>>=0,e==i>>>0?setTimeout(Bt):P?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=L.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,i,f,g,E){i>>>=0,f>>>=0,lr.length=g,E=E>>>0>>>3;for(var _=0;_<g;_++)lr[_]=l()[E+_>>>0];return e=i?ot[i]:ja[e],L.eb=f,f=e(...lr),L.eb=0,f},K:ur,o:function(e){R&&L.La[e>>>0].ref()},s:function(e,i,f){e=i+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*i:NaN,f>>>=0,e=new Date(1e3*e),a()[f>>>2>>>0]=e.getUTCSeconds(),a()[f+4>>>2>>>0]=e.getUTCMinutes(),a()[f+8>>>2>>>0]=e.getUTCHours(),a()[f+12>>>2>>>0]=e.getUTCDate(),a()[f+16>>>2>>>0]=e.getUTCMonth(),a()[f+20>>>2>>>0]=e.getUTCFullYear()-1900,a()[f+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[f+28>>>2>>>0]=e},t:function(e,i,f){e=i+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*i:NaN,f>>>=0,e=new Date(1e3*e),a()[f>>>2>>>0]=e.getSeconds(),a()[f+4>>>2>>>0]=e.getMinutes(),a()[f+8>>>2>>>0]=e.getHours(),a()[f+12>>>2>>>0]=e.getDate(),a()[f+16>>>2>>>0]=e.getMonth(),a()[f+20>>>2>>>0]=e.getFullYear()-1900,a()[f+24>>>2>>>0]=e.getDay(),i=(st(e.getFullYear())?qr:Jr)[e.getMonth()]+e.getDate()-1|0,a()[f+28>>>2>>>0]=i,a()[f+36>>>2>>>0]=-(60*e.getTimezoneOffset()),i=new Date(e.getFullYear(),6,1).getTimezoneOffset();var g=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(i!=g&&e.getTimezoneOffset()==Math.min(g,i))|0,a()[f+32>>>2>>>0]=e},u:function(e){e>>>=0;var i=new Date(a()[e+20>>>2>>>0]+1900,a()[e+16>>>2>>>0],a()[e+12>>>2>>>0],a()[e+8>>>2>>>0],a()[e+4>>>2>>>0],a()[e>>>2>>>0],0),f=a()[e+32>>>2>>>0],g=i.getTimezoneOffset(),E=new Date(i.getFullYear(),6,1).getTimezoneOffset(),_=new Date(i.getFullYear(),0,1).getTimezoneOffset(),x=Math.min(_,E);return 0>f?a()[e+32>>>2>>>0]=+(E!=_&&x==g):0<f!=(x==g)&&(E=Math.max(_,E),i.setTime(i.getTime()+6e4*((0<f?x:E)-g))),a()[e+24>>>2>>>0]=i.getDay(),f=(st(i.getFullYear())?qr:Jr)[i.getMonth()]+i.getDate()-1|0,a()[e+28>>>2>>>0]=f,a()[e>>>2>>>0]=i.getSeconds(),a()[e+4>>>2>>>0]=i.getMinutes(),a()[e+8>>>2>>>0]=i.getHours(),a()[e+12>>>2>>>0]=i.getDate(),a()[e+16>>>2>>>0]=i.getMonth(),a()[e+20>>>2>>>0]=i.getYear(),e=i.getTime(),e=isNaN(e)?-1:e/1e3,dn((Fe=e,1<=+Math.abs(Fe)?0<Fe?+Math.floor(Fe/4294967296)>>>0:~~+Math.ceil((Fe-+(~~Fe>>>0))/4294967296)>>>0:0)),e>>>0},q:Xr,r:Qr,y:function(e,i,f,g){e>>>=0,i>>>=0,f>>>=0,g>>>=0;var E=new Date().getFullYear(),_=new Date(E,0,1),x=new Date(E,6,1);E=_.getTimezoneOffset();var ee=x.getTimezoneOffset(),Be=Math.max(E,ee);c()[e>>>2>>>0]=60*Be,a()[i>>>2>>>0]=+(E!=ee),e=me=>me.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],_=e(_),x=e(x),ee<E?($e(_,f,17),$e(x,g,17)):($e(_,g,17),$e(x,f,17))},c:()=>{oe("")},O:function(e,i,f){e>>>=0,i>>>=0,f>>>=0,fr.length=0;for(var g;g=u()[i++>>>0];){var E=g!=105;E&=g!=112,f+=E&&f%8?4:0,fr.push(g==112?c()[f>>>2>>>0]:g==105?a()[f>>>2>>>0]:l()[f>>>3>>>0]),f+=E?8:4}return ot[e](...fr)},k:()=>{},i:()=>Date.now(),U:()=>{throw Le+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>R?(ra(),Ke(ta)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var i=u().length;if(e<=i||4294901760<e)return!1;for(var f=1;4>=f;f*=2){var g=i*(1+.2/f);g=Math.min(g,e+100663296);var E=Math;g=Math.max(e,g);e:{E=(E.min.call(E,4294901760,g+(65536-g%65536)%65536)-ne.buffer.byteLength+65535)/65536;try{ne.grow(E),ae();var _=1;break e}catch{}_=void 0}if(_)return!0}return!1},M:Zr,N:en,G:wt,g:tn,m:rn,v:nn,l:an,a:ne||s.wasmMemory,w:un,d:function(e,i,f,g){return un(e>>>0,i>>>0,f>>>0,g>>>0)}},k=function(){function e(f,g){return k=f.exports,k=Va(),L.ab.push(k.ya),Ot=k.za,We.unshift(k.V),Ae=g,Ve(),k}var i={a:Ya};if(De++,s.instantiateWasm)try{return s.instantiateWasm(i,e)}catch(f){ie(`Module.instantiateWasm callback failed with error: ${f}`),m(f)}return xt(i,function(f){e(f.instance,f.module)}).catch(m),{}}();s._OrtInit=(e,i)=>(s._OrtInit=k.W)(e,i),s._OrtGetLastError=(e,i)=>(s._OrtGetLastError=k.X)(e,i),s._OrtCreateSessionOptions=(e,i,f,g,E,_,x,ee,Be,me)=>(s._OrtCreateSessionOptions=k.Y)(e,i,f,g,E,_,x,ee,Be,me),s._OrtAppendExecutionProvider=(e,i)=>(s._OrtAppendExecutionProvider=k.Z)(e,i),s._OrtAddFreeDimensionOverride=(e,i,f)=>(s._OrtAddFreeDimensionOverride=k._)(e,i,f),s._OrtAddSessionConfigEntry=(e,i,f)=>(s._OrtAddSessionConfigEntry=k.$)(e,i,f),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=k.aa)(e),s._OrtCreateSession=(e,i,f)=>(s._OrtCreateSession=k.ba)(e,i,f),s._OrtReleaseSession=e=>(s._OrtReleaseSession=k.ca)(e),s._OrtGetInputOutputCount=(e,i,f)=>(s._OrtGetInputOutputCount=k.da)(e,i,f),s._OrtGetInputName=(e,i)=>(s._OrtGetInputName=k.ea)(e,i),s._OrtGetOutputName=(e,i)=>(s._OrtGetOutputName=k.fa)(e,i),s._OrtFree=e=>(s._OrtFree=k.ga)(e),s._OrtCreateTensor=(e,i,f,g,E,_)=>(s._OrtCreateTensor=k.ha)(e,i,f,g,E,_),s._OrtGetTensorData=(e,i,f,g,E)=>(s._OrtGetTensorData=k.ia)(e,i,f,g,E),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=k.ja)(e),s._OrtCreateRunOptions=(e,i,f,g)=>(s._OrtCreateRunOptions=k.ka)(e,i,f,g),s._OrtAddRunConfigEntry=(e,i,f)=>(s._OrtAddRunConfigEntry=k.la)(e,i,f),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=k.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=k.na)(e),s._OrtBindInput=(e,i,f)=>(s._OrtBindInput=k.oa)(e,i,f),s._OrtBindOutput=(e,i,f,g)=>(s._OrtBindOutput=k.pa)(e,i,f,g),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=k.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=k.ra)(e),s._OrtRunWithBinding=(e,i,f,g,E)=>(s._OrtRunWithBinding=k.sa)(e,i,f,g,E),s._OrtRun=(e,i,f,g,E,_,x,ee)=>(s._OrtRun=k.ta)(e,i,f,g,E,_,x,ee),s._OrtEndProfiling=e=>(s._OrtEndProfiling=k.ua)(e);var Lt=s._pthread_self=()=>(Lt=s._pthread_self=k.va)();s._malloc=e=>(s._malloc=k.wa)(e),s._free=e=>(s._free=k.xa)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=k.ya)();var ln=s.__emscripten_thread_init=(e,i,f,g,E,_)=>(ln=s.__emscripten_thread_init=k.Aa)(e,i,f,g,E,_);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=k.Ba)();var fn=(e,i,f,g,E)=>(fn=k.Ca)(e,i,f,g,E),pr=e=>(pr=k.Da)(e),mr=s.__emscripten_thread_exit=e=>(mr=s.__emscripten_thread_exit=k.Ea)(e),cn=()=>(cn=k.Fa)(),dn=e=>(dn=k.Ga)(e),pn=(e,i)=>(pn=k.Ha)(e,i),kt=e=>(kt=k.Ia)(e),hr=e=>(hr=k.Ja)(e),gr=()=>(gr=k.Ka)();function Va(){var e=k;e=Object.assign({},e);var i=g=>()=>g()>>>0,f=g=>E=>g(E)>>>0;return e.va=i(e.va),e.wa=f(e.wa),e.emscripten_main_runtime_thread_id=i(e.emscripten_main_runtime_thread_id),e.Ja=f(e.Ja),e.Ka=i(e.Ka),e}s.wasmMemory=ne,s.stackSave=()=>gr(),s.stackRestore=e=>kt(e),s.stackAlloc=e=>hr(e),s.keepRuntimeAlive=()=>0<Le,s.UTF8ToString=Z,s.stringToUTF8=$e,s.lengthBytesUTF8=fe,s.ExitStatus=qe,s.PThread=L;var Nt;be=function e(){Nt||mn(),Nt||(be=e)};function mn(){if(!(0<De))if(P)h(s),P||Xe(We),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Me.unshift(s.preRun.shift());Xe(Me),0<De||Nt||(Nt=!0,s.calledRun=!0,we||(P||Xe(We),h(s),P||Xe(Ce)))}}return mn(),y}})();typeof aa=="object"&&typeof Cr=="object"?Cr.exports=na:typeof define=="function"&&define.amd&&define([],()=>na)});var sa=it((Os,ao)=>{ao.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'});var ua,oo,Pr,Rr,Vt,ia,so,io,uo,la,G,rt=W(()=>{"use strict";ua=Kn();oo=oa(),Rr=!1,Vt=!1,ia=!1,so=n=>{if(n===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+n+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+n+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},io=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},uo=(n,r)=>n?"ort-training-wasm-simd.wasm":r?"ort-wasm-threaded.wasm":"ort-wasm.wasm",la=async n=>{if(Rr)return Promise.resolve();if(Vt)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(ia)throw new Error("previous call to 'initializeWebAssembly()' failed.");Vt=!0;let r=n.initTimeout,t=n.numThreads,u=n.simd,a=so(t),c=u&&io(),l=n.wasmPaths,s=typeof l=="string"?l:void 0,h=uo(c,a),m=typeof l=="object"?l[h]:void 0,y=!1,w=[];if(r>0&&w.push(new Promise(O=>{setTimeout(()=>{y=!0,O()},r)})),w.push(new Promise((O,A)=>{let C=a?oo:ua,S={locateFile:(R,P)=>a&&R.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([sa()],{type:"text/javascript"})):R.endsWith(".wasm")?m||(s??P)+h:P+R};if(a)if(S.numThreads=t,typeof Blob>"u")S.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let R=`var ortWasmThreaded=${C.toString()};`;S.mainScriptUrlOrBlob=new Blob([R],{type:"text/javascript"})}C(S).then(R=>{Vt=!1,Rr=!0,Pr=R,O()},R=>{Vt=!1,ia=!0,A(R)})})),await Promise.race(w),y)throw new Error(`WebAssembly backend initializing failed due to timeout: ${r}ms`)},G=()=>{if(Rr&&Pr)return Pr;throw new Error("WebAssembly is not initialized yet.")}});var K,Et,q,St=W(()=>{"use strict";rt();K=(n,r)=>{let t=G(),u=t.lengthBytesUTF8(n)+1,a=t._malloc(u);return t.stringToUTF8(n,a,u),r.push(a),a},Et=(n,r,t,u)=>{if(typeof n=="object"&&n!==null){if(t.has(n))throw new Error("Circular reference in options");t.add(n)}Object.entries(n).forEach(([a,c])=>{let l=r?r+a:a;if(typeof c=="object")Et(c,l+".",t,u);else if(typeof c=="string"||typeof c=="number")u(l,c.toString());else if(typeof c=="boolean")u(l,c?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof c}`)})},q=n=>{let r=G(),t=r.stackSave();try{let u=r.stackAlloc(8);r._OrtGetLastError(u,u+4);let a=r.HEAP32[u/4],c=r.HEAPU32[u/4+1],l=c?r.UTF8ToString(c):"";throw new Error(`${n} ERROR_CODE: ${a}, ERROR_MESSAGE: ${l}`)}finally{r.stackRestore(t)}}});var ft,xr=W(()=>{"use strict";rt();St();ft=n=>{let r=G(),t=0,u=[],a=n||{};try{if(n?.logSeverityLevel===void 0)a.logSeverityLevel=2;else if(typeof n.logSeverityLevel!="number"||!Number.isInteger(n.logSeverityLevel)||n.logSeverityLevel<0||n.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${n.logSeverityLevel}`);if(n?.logVerbosityLevel===void 0)a.logVerbosityLevel=0;else if(typeof n.logVerbosityLevel!="number"||!Number.isInteger(n.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${n.logVerbosityLevel}`);n?.terminate===void 0&&(a.terminate=!1);let c=0;return n?.tag!==void 0&&(c=K(n.tag,u)),t=r._OrtCreateRunOptions(a.logSeverityLevel,a.logVerbosityLevel,!!a.terminate,c),t===0&&q("Can't create run options."),n?.extra!==void 0&&Et(n.extra,"",new WeakSet,(l,s)=>{let h=K(l,u),m=K(s,u);r._OrtAddRunConfigEntry(t,h,m)!==0&&q(`Can't set a run config entry: ${l} - ${s}.`)}),[t,u]}catch(c){throw t!==0&&r._OrtReleaseRunOptions(t),u.forEach(l=>r._free(l)),c}}});var lo,fo,co,po,qt,Ir=W(()=>{"use strict";rt();St();lo=n=>{switch(n){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${n}`)}},fo=n=>{switch(n){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${n}`)}},co=n=>{n.extra||(n.extra={}),n.extra.session||(n.extra.session={});let r=n.extra.session;r.use_ort_model_bytes_directly||(r.use_ort_model_bytes_directly="1"),n.executionProviders&&n.executionProviders.some(t=>(typeof t=="string"?t:t.name)==="webgpu")&&(n.enableMemPattern=!1)},po=(n,r,t)=>{for(let u of r){let a=typeof u=="string"?u:u.name;switch(a){case"webnn":if(a="WEBNN",typeof u!="string"){let l=u;if(l?.deviceType){let s=K("deviceType",t),h=K(l.deviceType,t);G()._OrtAddSessionConfigEntry(n,s,h)!==0&&q(`Can't set a session config entry: 'deviceType' - ${l.deviceType}.`)}if(l?.numThreads){let s=l.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let h=K("numThreads",t),m=K(s.toString(),t);G()._OrtAddSessionConfigEntry(n,h,m)!==0&&q(`Can't set a session config entry: 'numThreads' - ${l.numThreads}.`)}if(l?.powerPreference){let s=K("powerPreference",t),h=K(l.powerPreference,t);G()._OrtAddSessionConfigEntry(n,s,h)!==0&&q(`Can't set a session config entry: 'powerPreference' - ${l.powerPreference}.`)}}break;case"webgpu":if(a="JS",typeof u!="string"){let l=u;if(l?.preferredLayout){if(l.preferredLayout!=="NCHW"&&l.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${l.preferredLayout}`);let s=K("preferredLayout",t),h=K(l.preferredLayout,t);G()._OrtAddSessionConfigEntry(n,s,h)!==0&&q(`Can't set a session config entry: 'preferredLayout' - ${l.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${a}`)}let c=K(a,t);G()._OrtAppendExecutionProvider(n,c)!==0&&q(`Can't append execution provider: ${a}.`)}},qt=n=>{let r=G(),t=0,u=[],a=n||{};co(a);try{let c=lo(a.graphOptimizationLevel??"all"),l=fo(a.executionMode??"sequential"),s=typeof a.logId=="string"?K(a.logId,u):0,h=a.logSeverityLevel??2;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log serverity level is not valid: ${h}`);let m=a.logVerbosityLevel??0;if(!Number.isInteger(m)||m<0||m>4)throw new Error(`log verbosity level is not valid: ${m}`);let y=typeof a.optimizedModelFilePath=="string"?K(a.optimizedModelFilePath,u):0;if(t=r._OrtCreateSessionOptions(c,!!a.enableCpuMemArena,!!a.enableMemPattern,l,!!a.enableProfiling,0,s,h,m,y),t===0&&q("Can't create session options."),a.executionProviders&&po(t,a.executionProviders,u),a.enableGraphCapture!==void 0){if(typeof a.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${a.enableGraphCapture}`);let w=K("enableGraphCapture",u),O=K(a.enableGraphCapture.toString(),u);r._OrtAddSessionConfigEntry(t,w,O)!==0&&q(`Can't set a session config entry: 'enableGraphCapture' - ${a.enableGraphCapture}.`)}if(a.freeDimensionOverrides)for(let[w,O]of Object.entries(a.freeDimensionOverrides)){if(typeof w!="string")throw new Error(`free dimension override name must be a string: ${w}`);if(typeof O!="number"||!Number.isInteger(O)||O<0)throw new Error(`free dimension override value must be a non-negative integer: ${O}`);let A=K(w,u);r._OrtAddFreeDimensionOverride(t,A,O)!==0&&q(`Can't set a free dimension override: ${w} - ${O}.`)}return a.extra!==void 0&&Et(a.extra,"",new WeakSet,(w,O)=>{let A=K(w,u),C=K(O,u);r._OrtAddSessionConfigEntry(t,A,C)!==0&&q(`Can't set a session config entry: ${w} - ${O}.`)}),[t,u]}catch(c){throw t!==0&&r._OrtReleaseSessionOptions(t),u.forEach(l=>r._free(l)),c}}});var ct,Jt,Dr,At,fa,Xt,Mt,Qt=W(()=>{"use strict";ct=n=>{switch(n){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${n}`)}},Jt=n=>{switch(n){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${n}`)}},Dr=n=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][n],At=n=>{switch(n){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${n}`)}},fa=n=>{switch(n){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${n}`)}},Xt=n=>n==="float32"||n==="float16"||n==="int32"||n==="int64"||n==="uint32"||n==="uint8"||n==="bool",Mt=n=>{switch(n){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${n}`)}}});var Ct,Fr=W(()=>{"use strict";Ct=async n=>{if(typeof n=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(n))}catch(r){if(r.code==="ERR_FS_FILE_TOO_LARGE"){let t=(void 0)(n),u=[];for await(let a of t)u.push(a);return new Uint8Array(Buffer.concat(u))}throw r}else{let r=await fetch(n);if(!r.ok)throw new Error(`failed to load external data file: ${n}`);let t=r.headers.get("Content-Length"),u=t?parseInt(t,10):0;if(u<1073741824)return new Uint8Array(await r.arrayBuffer());{if(!r.body)throw new Error(`failed to load external data file: ${n}, no response body.`);let a=r.body.getReader(),c;try{c=new ArrayBuffer(u)}catch(s){if(s instanceof RangeError){let h=Math.ceil(u/65536);c=new WebAssembly.Memory({initial:h,maximum:h}).buffer}else throw s}let l=0;for(;;){let{done:s,value:h}=await a.read();if(s)break;let m=h.byteLength;new Uint8Array(c,l,m).set(h),l+=m}return new Uint8Array(c,0,u)}}else return n instanceof Blob?new Uint8Array(await n.arrayBuffer()):n instanceof Uint8Array?n:new Uint8Array(n)}});var mo,ca,da,dt,ho,Pt,pa,ma,Kt,ha,ga,ya,Zt=W(()=>{"use strict";xr();Ir();Qt();rt();St();Fr();mo=(n,r)=>{G()._OrtInit(n,r)!==0&&q("Can't initialize onnxruntime.")},ca=async n=>{mo(n.wasm.numThreads,fa(n.logLevel))},da=async(n,r)=>{},dt=new Map,ho=n=>{let r=G(),t=r.stackSave();try{let u=r.stackAlloc(8);return r._OrtGetInputOutputCount(n,u,u+4)!==0&&q("Can't get session input/output count."),[r.HEAP32[u/4],r.HEAP32[u/4+1]]}finally{r.stackRestore(t)}},Pt=n=>{let r=G(),t=r._malloc(n.byteLength);if(t===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${n.byteLength}.`);return r.HEAPU8.set(n,t),[t,n.byteLength]},pa=async(n,r)=>{let t,u,a=G();Array.isArray(n)?[t,u]=n:n.buffer===a.HEAPU8.buffer?[t,u]=[n.byteOffset,n.byteLength]:[t,u]=Pt(n);let c=0,l=0,s=0,h=[],m=[],y=[];try{if([l,h]=qt(r),r?.externalData&&a.mountExternalData){let F=[];for(let B of r.externalData){let $=typeof B=="string"?B:B.path;F.push(Ct(typeof B=="string"?B:B.data).then(X=>{a.mountExternalData($,X)}))}await Promise.all(F)}c=await a._OrtCreateSession(t,u,l),c===0&&q("Can't create a session.");let[w,O]=ho(c),A=!!r?.enableGraphCapture,C=[],S=[],R=[];for(let F=0;F<w;F++){let B=a._OrtGetInputName(c,F);B===0&&q("Can't get an input name."),m.push(B),C.push(a.UTF8ToString(B))}for(let F=0;F<O;F++){let B=a._OrtGetOutputName(c,F);B===0&&q("Can't get an output name."),y.push(B);let $=a.UTF8ToString(B);S.push($)}let P=null;return dt.set(c,[c,m,y,P,A,!1]),[c,C,S]}catch(w){throw m.forEach(O=>a._OrtFree(O)),y.forEach(O=>a._OrtFree(O)),s!==0&&a._OrtReleaseBinding(s),c!==0&&a._OrtReleaseSession(c),w}finally{a._free(t),l!==0&&a._OrtReleaseSessionOptions(l),h.forEach(w=>a._free(w)),a.unmountExternalData?.()}},ma=n=>{let r=G(),t=dt.get(n);if(!t)throw new Error(`cannot release session. invalid session id: ${n}`);let[u,a,c,l,s]=t;l&&(s&&r._OrtClearBoundOutputs(l.handle),r._OrtReleaseBinding(l.handle)),r.jsepOnReleaseSession?.(n),a.forEach(h=>r._OrtFree(h)),c.forEach(h=>r._OrtFree(h)),r._OrtReleaseSession(u),dt.delete(n)},Kt=(n,r,t,u,a,c=!1)=>{if(!n){r.push(0);return}let l=G(),s=n[0],h=n[1],m=n[3],y,w;if(s==="string"&&m==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(c&&m!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${a} when enableGraphCapture is true.`);if(m==="gpu-buffer"){let C=n[2].gpuBuffer,S=Dr(ct(s));w=h.reduce((P,F)=>P*F,1)*S;let R=l.jsepRegisterBuffer;if(!R)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');y=R(u,a,C,w)}else{let C=n[2];if(Array.isArray(C)){w=4*C.length,y=l._malloc(w),t.push(y);let S=y/4;for(let R=0;R<C.length;R++){if(typeof C[R]!="string")throw new TypeError(`tensor data at index ${R} is not a string`);l.HEAPU32[S++]=K(C[R],t)}}else w=C.byteLength,y=l._malloc(w),t.push(y),l.HEAPU8.set(new Uint8Array(C.buffer,C.byteOffset,w),y)}let O=l.stackSave(),A=l.stackAlloc(4*h.length);try{let C=A/4;h.forEach(R=>l.HEAP32[C++]=R);let S=l._OrtCreateTensor(ct(s),y,w,A,h.length,Mt(m));S===0&&q(`Can't create tensor for input/output. session=${u}, index=${a}.`),r.push(S)}finally{l.stackRestore(O)}},ha=async(n,r,t,u,a,c)=>{let l=G(),s=dt.get(n);if(!s)throw new Error(`cannot run inference. invalid session id: ${n}`);let h=s[0],m=s[1],y=s[2],w=s[3],O=s[4],A=s[5],C=r.length,S=u.length,R=0,P=[],F=[],B=[],$=[],X=l.stackSave(),Q=l.stackAlloc(C*4),D=l.stackAlloc(C*4),re=l.stackAlloc(S*4),Ne=l.stackAlloc(S*4);try{[R,P]=ft(c);for(let H=0;H<C;H++)Kt(t[H],F,$,n,r[H],O);for(let H=0;H<S;H++)Kt(a[H],B,$,n,C+u[H],O);let he=Q/4,Ye=D/4,ie=re/4,ne=Ne/4;for(let H=0;H<C;H++)l.HEAPU32[he++]=F[H],l.HEAPU32[Ye++]=m[r[H]];for(let H=0;H<S;H++)l.HEAPU32[ie++]=B[H],l.HEAPU32[ne++]=y[u[H]];l.jsepOnRunStart?.(h);let Ae;Ae=await l._OrtRun(h,D,Q,C,Ne,S,re,R),Ae!==0&&q("failed to call OrtRun().");let we=[];for(let H=0;H<S;H++){let de=l.HEAPU32[re/4+H];if(de===B[H]){we.push(a[H]);continue}let He=l.stackSave(),ge=l.stackAlloc(4*4),Te=!1,ue,ae=0;try{l._OrtGetTensorData(de,ge,ge+4,ge+8,ge+12)!==0&&q(`Can't access output tensor data on index ${H}.`);let Me=ge/4,We=l.HEAPU32[Me++];ae=l.HEAPU32[Me++];let Ce=l.HEAPU32[Me++],De=l.HEAPU32[Me++],Pe=[];for(let oe=0;oe<De;oe++)Pe.push(l.HEAPU32[Ce/4+oe]);l._OrtFree(Ce);let be=Pe.reduce((oe,se)=>oe*se,1);ue=Jt(We);let Ve=w?.outputPreferredLocations[u[H]];if(ue==="string"){if(Ve==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let oe=[],se=ae/4;for(let pe=0;pe<be;pe++){let Re=l.HEAPU32[se++],xe=pe===be-1?void 0:l.HEAPU32[se]-Re;oe.push(l.UTF8ToString(Re,xe))}we.push([ue,Pe,oe,"cpu"])}else if(Ve==="gpu-buffer"&&be>0){let oe=l.jsepGetBuffer;if(!oe)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let se=oe(ae),pe=Dr(We);if(pe===void 0||!Xt(ue))throw new Error(`Unsupported data type: ${ue}`);Te=!0,we.push([ue,Pe,{gpuBuffer:se,download:l.jsepCreateDownloader(se,be*pe,ue),dispose:()=>{l._OrtReleaseTensor(de)}},"gpu-buffer"])}else{let oe=At(ue),se=new oe(be);new Uint8Array(se.buffer,se.byteOffset,se.byteLength).set(l.HEAPU8.subarray(ae,ae+se.byteLength)),we.push([ue,Pe,se,"cpu"])}}finally{l.stackRestore(He),ue==="string"&&ae&&l._free(ae),Te||l._OrtReleaseTensor(de)}}return w&&!O&&(l._OrtClearBoundOutputs(w.handle),dt.set(n,[h,m,y,w,O,!1])),we}finally{l.stackRestore(X),F.forEach(he=>l._OrtReleaseTensor(he)),B.forEach(he=>l._OrtReleaseTensor(he)),$.forEach(he=>l._free(he)),R!==0&&l._OrtReleaseRunOptions(R),P.forEach(he=>l._free(he))}},ga=n=>{let r=G(),t=dt.get(n);if(!t)throw new Error("invalid session id");let u=t[0],a=r._OrtEndProfiling(u);a===0&&q("Can't get an profile file name."),r._OrtFree(a)},ya=n=>{let r=[];for(let t of n){let u=t[2];!Array.isArray(u)&&"buffer"in u&&r.push(u.buffer)}return r}});var wa=it((Hs,yo)=>{yo.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var vt=Object.defineProperty;var qr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var Jr=Object.prototype.hasOwnProperty;var _t=(u,d)=>()=>(u&&(d=u(u=0)),d);var Ze=(u,d)=>()=>(d||u((d={exports:{}}).exports,d),d.exports),Et=(u,d)=>{for(var a in d)vt(u,a,{get:d[a],enumerable:!0})},Xr=(u,d,a,h)=>{if(d&&typeof d=="object"||typeof d=="function")for(let f of Vr(d))!Jr.call(u,f)&&f!==a&&vt(u,f,{get:()=>d[f],enumerable:!(h=qr(d,f))||h.enumerable});return u};var et=u=>Xr(vt({},"__esModule",{value:!0}),u);var St={};Et(St,{createReadStream:()=>lr,readFile:()=>Qr,readFileSync:()=>Kr});var Qr,Kr,lr,Tt=_t(()=>{Qr=void 0,Kr=void 0,lr=void 0});var At={};Et(At,{join:()=>Zr});var Zr,Mt=_t(()=>{Zr=void 0});var pr=Ze((dr,Ct)=>{"use strict";var cr=(()=>{var u=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(u||=__filename),function(d={}){var a=d,h,f,O=new Promise((t,o)=>{h=t,f=o}),g=Object.assign({},a),s="./this.program",T=typeof window=="object",U=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="",I,J,R;if(H){var B=(Tt(),et(St)),D=(Mt(),et(At));A=U?D.dirname(A)+"/":__dirname+"/",I=(t,o)=>(t=ce(t)?new URL(t):D.normalize(t),B.readFileSync(t,o?void 0:"utf8")),R=t=>(t=I(t,!0),t.buffer||(t=new Uint8Array(t)),t),J=(t,o,i,c=!0)=>{t=ce(t)?new URL(t):D.normalize(t),B.readFile(t,c?void 0:"utf8",(w,_)=>{w?i(w):o(c?_.buffer:_)})},!a.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2)}else(T||U)&&(U?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),u&&(A=u),A.startsWith("blob:")?A="":A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),I=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},U&&(R=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),J=(t,o,i)=>{var c=new XMLHttpRequest;c.open("GET",t,!0),c.responseType="arraybuffer",c.onload=()=>{c.status==200||c.status==0&&c.response?o(c.response):i()},c.onerror=i,c.send(null)});var M=console.log.bind(console),L=console.error.bind(console);Object.assign(a,g),g=null;var W,de=!1,pe,Z,E,X,Pe;function le(){var t=W.buffer;a.HEAP8=pe=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAPU8=Z=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAP32=E=new Int32Array(t),a.HEAPU32=X=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=Pe=new Float64Array(t)}var Ie=[],ne=[],Q=[],we=0,me=null,x=null;function se(t){throw t="Aborted("+t+")",L(t),de=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}var xe=t=>t.startsWith("data:application/octet-stream;base64,"),ce=t=>t.startsWith("file://"),ye;if(ye="ort-training-wasm-simd.wasm",!xe(ye)){var ae=ye;ye=a.locateFile?a.locateFile(ae,A):A+ae}function ee(t){if(R)return R(t);throw"both async and sync fetching of the wasm failed"}function Ye(t){if(T||U){if(typeof fetch=="function"&&!ce(t))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw`failed to load wasm binary file at \'${t}\'`;return o.arrayBuffer()}).catch(()=>ee(t));if(J)return new Promise((o,i)=>{J(t,c=>o(new Uint8Array(c)),i)})}return Promise.resolve().then(()=>ee(t))}function Oe(t,o,i){return Ye(t).then(c=>WebAssembly.instantiate(c,o)).then(i,c=>{L(`failed to asynchronously prepare wasm: ${c}`),se(c)})}function Ue(t,o){var i=ye;return typeof WebAssembly.instantiateStreaming!="function"||xe(i)||ce(i)||H||typeof fetch!="function"?Oe(i,t,o):fetch(i,{credentials:"same-origin"}).then(c=>WebAssembly.instantiateStreaming(c,t).then(o,function(w){return L(`wasm streaming compile failed: ${w}`),L("falling back to ArrayBuffer instantiation"),Oe(i,t,o)}))}var ve,Te={869736:(t,o,i,c)=>{if(typeof a>"u"||!a.La)return 1;if(t=ue(t>>>0),t.startsWith("./")&&(t=t.substring(2)),t=a.La.get(t),!t)return 2;if(o>>>=0,i>>>=0,o+i>t.byteLength)return 3;try{return Z.set(t.subarray(o,o+i),c>>>0>>>0),0}catch{return 4}}};class _e{constructor(o){this.Ja=o-24}}var ge=0,Be=0,te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,re=(t,o,i)=>{o>>>=0;var c=o+i;for(i=o;t[i]&&!(i>=c);)++i;if(16<i-o&&t.buffer&&te)return te.decode(t.subarray(o,i));for(c="";o<i;){var w=t[o++];if(w&128){var _=t[o++]&63;if((w&224)==192)c+=String.fromCharCode((w&31)<<6|_);else{var P=t[o++]&63;w=(w&240)==224?(w&15)<<12|_<<6|P:(w&7)<<18|_<<12|P<<6|t[o++]&63,65536>w?c+=String.fromCharCode(w):(w-=65536,c+=String.fromCharCode(55296|w>>10,56320|w&1023))}}else c+=String.fromCharCode(w)}return c},ue=(t,o)=>(t>>>=0)?re(Z,t,o):"",Ee=t=>{for(var o=0,i=0;i<t.length;++i){var c=t.charCodeAt(i);127>=c?o++:2047>=c?o+=2:55296<=c&&57343>=c?(o+=4,++i):o+=3}return o},Se=(t,o,i,c)=>{if(i>>>=0,!(0<c))return 0;var w=i;c=i+c-1;for(var _=0;_<t.length;++_){var P=t.charCodeAt(_);if(55296<=P&&57343>=P){var j=t.charCodeAt(++_);P=65536+((P&1023)<<10)|j&1023}if(127>=P){if(i>=c)break;o[i++>>>0]=P}else{if(2047>=P){if(i+1>=c)break;o[i++>>>0]=192|P>>6}else{if(65535>=P){if(i+2>=c)break;o[i++>>>0]=224|P>>12}else{if(i+3>=c)break;o[i++>>>0]=240|P>>18,o[i++>>>0]=128|P>>12&63}o[i++>>>0]=128|P>>6&63}o[i++>>>0]=128|P&63}}return o[i>>>0]=0,i-w},Le=t=>t%4===0&&(t%100!==0||t%400===0),je=[0,31,60,91,121,152,182,213,244,274,305,335],rt=[0,31,59,90,120,151,181,212,243,273,304,334],Ae=[],Ge={},ke=()=>{if(!We){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},o;for(o in Ge)Ge[o]===void 0?delete t[o]:t[o]=Ge[o];var i=[];for(o in t)i.push(`${o}=${t[o]}`);We=i}return We},We,nt=[null,[],[]],Fe=[31,29,31,30,31,30,31,31,30,31,30,31],at=[31,28,31,30,31,30,31,31,30,31,30,31];function G(t){var o=Array(Ee(t)+1);return Se(t,o,0,o.length),o}function qe(t,o,i,c){function w(p,k,$){for(p=typeof p=="number"?p.toString():p||"";p.length<k;)p=$[0]+p;return p}function _(p,k){return w(p,k,"0")}function P(p,k){function $(Ke){return 0>Ke?-1:0<Ke?1:0}var Me;return(Me=$(p.getFullYear()-k.getFullYear()))===0&&(Me=$(p.getMonth()-k.getMonth()))===0&&(Me=$(p.getDate()-k.getDate())),Me}function j(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function be(p){var k=p.Fa;for(p=new Date(new Date(p.Ga+1900,0,1).getTime());0<k;){var $=p.getMonth(),Me=(Le(p.getFullYear())?Fe:at)[$];if(k>Me-p.getDate())k-=Me-p.getDate()+1,p.setDate(1),11>$?p.setMonth($+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+k);break}}return $=new Date(p.getFullYear()+1,0,4),k=j(new Date(p.getFullYear(),0,4)),$=j($),0>=P(k,p)?0>=P($,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}t>>>=0,o>>>=0,i>>>=0,c>>>=0;var oe=X[c+40>>>2>>>0];c={Oa:E[c>>>2>>>0],Na:E[c+4>>>2>>>0],Ha:E[c+8>>>2>>>0],Ka:E[c+12>>>2>>>0],Ia:E[c+16>>>2>>>0],Ga:E[c+20>>>2>>>0],Aa:E[c+24>>>2>>>0],Fa:E[c+28>>>2>>>0],Qa:E[c+32>>>2>>>0],Ma:E[c+36>>>2>>>0],Pa:oe?ue(oe):""},i=ue(i),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ie in oe)i=i.replace(new RegExp(ie,"g"),oe[ie]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Re="January February March April May June July August September October November December".split(" ");oe={"%a":p=>Qe[p.Aa].substring(0,3),"%A":p=>Qe[p.Aa],"%b":p=>Re[p.Ia].substring(0,3),"%B":p=>Re[p.Ia],"%C":p=>_((p.Ga+1900)/100|0,2),"%d":p=>_(p.Ka,2),"%e":p=>w(p.Ka,2," "),"%g":p=>be(p).toString().substring(2),"%G":be,"%H":p=>_(p.Ha,2),"%I":p=>(p=p.Ha,p==0?p=12:12<p&&(p-=12),_(p,2)),"%j":p=>{for(var k=0,$=0;$<=p.Ia-1;k+=(Le(p.Ga+1900)?Fe:at)[$++]);return _(p.Ka+k,3)},"%m":p=>_(p.Ia+1,2),"%M":p=>_(p.Na,2),"%n":()=>`\n`,"%p":p=>0<=p.Ha&&12>p.Ha?"AM":"PM","%S":p=>_(p.Oa,2),"%t":()=>"	","%u":p=>p.Aa||7,"%U":p=>_(Math.floor((p.Fa+7-p.Aa)/7),2),"%V":p=>{var k=Math.floor((p.Fa+7-(p.Aa+6)%7)/7);if(2>=(p.Aa+371-p.Fa-2)%7&&k++,k)k==53&&($=(p.Aa+371-p.Fa)%7,$==4||$==3&&Le(p.Ga)||(k=1));else{k=52;var $=(p.Aa+7-p.Fa-1)%7;($==4||$==5&&Le(p.Ga%400-1))&&k++}return _(k,2)},"%w":p=>p.Aa,"%W":p=>_(Math.floor((p.Fa+7-(p.Aa+6)%7)/7),2),"%y":p=>(p.Ga+1900).toString().substring(2),"%Y":p=>p.Ga+1900,"%z":p=>{p=p.Ma;var k=0<=p;return p=Math.abs(p)/60,(k?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.Pa,"%%":()=>"%"},i=i.replace(/%%/g,"\\0\\0");for(ie in oe)i.includes(ie)&&(i=i.replace(new RegExp(ie,"g"),oe[ie](c)));return i=i.replace(/\\0\\0/g,"%"),ie=G(i),ie.length>o?0:(pe.set(ie,t>>>0),ie.length-1)}var Ve={a:function(t,o,i){t>>>=0;var c=new _e(t);throw X[c.Ja+16>>>2>>>0]=0,X[c.Ja+4>>>2>>>0]=o>>>0,X[c.Ja+8>>>2>>>0]=i>>>0,ge=t,Be++,ge},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(t,o,i){return o>>>=0,Z.copyWithin(t>>>0>>>0,o>>>0,o+(i>>>0)>>>0)},n:function(t,o,i){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,i>>>=0,t=new Date(1e3*t),E[i>>>2>>>0]=t.getUTCSeconds(),E[i+4>>>2>>>0]=t.getUTCMinutes(),E[i+8>>>2>>>0]=t.getUTCHours(),E[i+12>>>2>>>0]=t.getUTCDate(),E[i+16>>>2>>>0]=t.getUTCMonth(),E[i+20>>>2>>>0]=t.getUTCFullYear()-1900,E[i+24>>>2>>>0]=t.getUTCDay(),E[i+28>>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(t,o,i){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,i>>>=0,t=new Date(1e3*t),E[i>>>2>>>0]=t.getSeconds(),E[i+4>>>2>>>0]=t.getMinutes(),E[i+8>>>2>>>0]=t.getHours(),E[i+12>>>2>>>0]=t.getDate(),E[i+16>>>2>>>0]=t.getMonth(),E[i+20>>>2>>>0]=t.getFullYear()-1900,E[i+24>>>2>>>0]=t.getDay(),E[i+28>>>2>>>0]=(Le(t.getFullYear())?je:rt)[t.getMonth()]+t.getDate()-1|0,E[i+36>>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var c=new Date(t.getFullYear(),0,1).getTimezoneOffset();E[i+32>>>2>>>0]=(o!=c&&t.getTimezoneOffset()==Math.min(c,o))|0},p:function(t){t>>>=0;var o=new Date(E[t+20>>>2>>>0]+1900,E[t+16>>>2>>>0],E[t+12>>>2>>>0],E[t+8>>>2>>>0],E[t+4>>>2>>>0],E[t>>>2>>>0],0),i=E[t+32>>>2>>>0],c=o.getTimezoneOffset(),w=new Date(o.getFullYear(),6,1).getTimezoneOffset(),_=new Date(o.getFullYear(),0,1).getTimezoneOffset(),P=Math.min(_,w);return 0>i?E[t+32>>>2>>>0]=+(w!=_&&P==c):0<i!=(P==c)&&(w=Math.max(_,w),o.setTime(o.getTime()+6e4*((0<i?P:w)-c))),E[t+24>>>2>>>0]=o.getDay(),E[t+28>>>2>>>0]=(Le(o.getFullYear())?je:rt)[o.getMonth()]+o.getDate()-1|0,E[t>>>2>>>0]=o.getSeconds(),E[t+4>>>2>>>0]=o.getMinutes(),E[t+8>>>2>>>0]=o.getHours(),E[t+12>>>2>>>0]=o.getDate(),E[t+16>>>2>>>0]=o.getMonth(),E[t+20>>>2>>>0]=o.getYear(),t=o.getTime(),t=isNaN(t)?-1:t/1e3,Je((ve=t,1<=+Math.abs(ve)?0<ve?+Math.floor(ve/4294967296)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)),t>>>0},l:function(){return-52},m:function(){},t:function(t,o,i,c){i>>>=0,c>>>=0;var w=new Date().getFullYear(),_=new Date(w,0,1),P=new Date(w,6,1);w=_.getTimezoneOffset();var j=P.getTimezoneOffset();X[t>>>0>>>2>>>0]=60*Math.max(w,j),E[o>>>0>>>2>>>0]=+(w!=j),t=be=>be.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],_=t(_),P=t(P),j<w?(Se(_,Z,i,17),Se(P,Z,c,17)):(Se(_,Z,c,17),Se(P,Z,i,17))},d:()=>{se("")},B:function(t,o,i){t>>>=0,o>>>=0,i>>>=0,Ae.length=0;for(var c;c=Z[o++>>>0];){var w=c!=105;w&=c!=112,i+=w&&i%8?4:0,Ae.push(c==112?X[i>>>2>>>0]:c==105?E[i>>>2>>>0]:Pe[i>>>3>>>0]),i+=w?8:4}return Te[t](...Ae)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(t){t>>>=0;var o=Z.length;if(4294901760<t)return!1;for(var i=1;4>=i;i*=2){var c=o*(1+.2/i);c=Math.min(c,t+100663296);var w=Math;c=Math.max(t,c);e:{w=(w.min.call(w,4294901760,c+(65536-c%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(w),le();var _=1;break e}catch{}_=void 0}if(_)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var i=0;return ke().forEach((c,w)=>{var _=o+i;for(w=X[t+4*w>>>2>>>0]=_,_=0;_<c.length;++_)pe[w++>>>0]=c.charCodeAt(_);pe[w>>>0]=0,i+=c.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var i=ke();X[t>>>2>>>0]=i.length;var c=0;return i.forEach(w=>c+=w.length+1),X[o>>>2>>>0]=c,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(t,o,i,c){o>>>=0,i>>>=0,c>>>=0;for(var w=0,_=0;_<i;_++){var P=X[o>>>2>>>0],j=X[o+4>>>2>>>0];o+=8;for(var be=0;be<j;be++){var oe=Z[P+be>>>0],ie=nt[t];oe===0||oe===10?((t===1?M:L)(re(ie,0)),ie.length=0):ie.push(oe)}w+=j}return X[c>>>2>>>0]=w,0},r:qe,c:function(t,o,i,c){return qe(t>>>0,o>>>0,i>>>0,c>>>0)}},S=function(){function t(i){return S=i.exports,S=it(),W=S.K,le(),ne.unshift(S.L),we--,we==0&&(me!==null&&(clearInterval(me),me=null),x&&(i=x,x=null,i())),S}var o={a:Ve};if(we++,a.instantiateWasm)try{return a.instantiateWasm(o,t)}catch(i){L(`Module.instantiateWasm callback failed with error: ${i}`),f(i)}return Ue(o,function(i){t(i.instance)}).catch(f),{}}();a._OrtInit=(t,o)=>(a._OrtInit=S.M)(t,o),a._OrtGetLastError=(t,o)=>(a._OrtGetLastError=S.N)(t,o),a._OrtCreateSessionOptions=(t,o,i,c,w,_,P,j,be,oe)=>(a._OrtCreateSessionOptions=S.O)(t,o,i,c,w,_,P,j,be,oe),a._OrtAppendExecutionProvider=(t,o)=>(a._OrtAppendExecutionProvider=S.P)(t,o),a._OrtAddFreeDimensionOverride=(t,o,i)=>(a._OrtAddFreeDimensionOverride=S.Q)(t,o,i),a._OrtAddSessionConfigEntry=(t,o,i)=>(a._OrtAddSessionConfigEntry=S.R)(t,o,i),a._OrtReleaseSessionOptions=t=>(a._OrtReleaseSessionOptions=S.S)(t),a._OrtCreateSession=(t,o,i)=>(a._OrtCreateSession=S.T)(t,o,i),a._OrtReleaseSession=t=>(a._OrtReleaseSession=S.U)(t),a._OrtGetInputOutputCount=(t,o,i)=>(a._OrtGetInputOutputCount=S.V)(t,o,i),a._OrtGetInputName=(t,o)=>(a._OrtGetInputName=S.W)(t,o),a._OrtGetOutputName=(t,o)=>(a._OrtGetOutputName=S.X)(t,o),a._OrtFree=t=>(a._OrtFree=S.Y)(t),a._OrtCreateTensor=(t,o,i,c,w,_)=>(a._OrtCreateTensor=S.Z)(t,o,i,c,w,_),a._OrtGetTensorData=(t,o,i,c,w)=>(a._OrtGetTensorData=S._)(t,o,i,c,w),a._OrtReleaseTensor=t=>(a._OrtReleaseTensor=S.$)(t),a._OrtCreateRunOptions=(t,o,i,c)=>(a._OrtCreateRunOptions=S.aa)(t,o,i,c),a._OrtAddRunConfigEntry=(t,o,i)=>(a._OrtAddRunConfigEntry=S.ba)(t,o,i),a._OrtReleaseRunOptions=t=>(a._OrtReleaseRunOptions=S.ca)(t),a._OrtCreateBinding=t=>(a._OrtCreateBinding=S.da)(t),a._OrtBindInput=(t,o,i)=>(a._OrtBindInput=S.ea)(t,o,i),a._OrtBindOutput=(t,o,i,c)=>(a._OrtBindOutput=S.fa)(t,o,i,c),a._OrtClearBoundOutputs=t=>(a._OrtClearBoundOutputs=S.ga)(t),a._OrtReleaseBinding=t=>(a._OrtReleaseBinding=S.ha)(t),a._OrtRunWithBinding=(t,o,i,c,w)=>(a._OrtRunWithBinding=S.ia)(t,o,i,c,w),a._OrtRun=(t,o,i,c,w,_,P,j)=>(a._OrtRun=S.ja)(t,o,i,c,w,_,P,j),a._OrtEndProfiling=t=>(a._OrtEndProfiling=S.ka)(t),a._OrtTrainingLoadCheckpoint=(t,o)=>(a._OrtTrainingLoadCheckpoint=S.la)(t,o),a._OrtTrainingReleaseCheckpoint=t=>(a._OrtTrainingReleaseCheckpoint=S.ma)(t),a._OrtTrainingCreateSession=(t,o,i,c,w,_,P,j)=>(a._OrtTrainingCreateSession=S.na)(t,o,i,c,w,_,P,j),a._OrtTrainingLazyResetGrad=t=>(a._OrtTrainingLazyResetGrad=S.oa)(t),a._OrtTrainingRunTrainStep=(t,o,i,c,w,_)=>(a._OrtTrainingRunTrainStep=S.pa)(t,o,i,c,w,_),a._OrtTrainingOptimizerStep=(t,o)=>(a._OrtTrainingOptimizerStep=S.qa)(t,o),a._OrtTrainingEvalStep=(t,o,i,c,w,_)=>(a._OrtTrainingEvalStep=S.ra)(t,o,i,c,w,_),a._OrtTrainingGetParametersSize=(t,o,i)=>(a._OrtTrainingGetParametersSize=S.sa)(t,o,i),a._OrtTrainingCopyParametersToBuffer=(t,o,i,c)=>(a._OrtTrainingCopyParametersToBuffer=S.ta)(t,o,i,c),a._OrtTrainingCopyParametersFromBuffer=(t,o,i,c)=>(a._OrtTrainingCopyParametersFromBuffer=S.ua)(t,o,i,c),a._OrtTrainingGetModelInputOutputCount=(t,o,i,c)=>(a._OrtTrainingGetModelInputOutputCount=S.va)(t,o,i,c),a._OrtTrainingGetModelInputOutputName=(t,o,i,c)=>(a._OrtTrainingGetModelInputOutputName=S.wa)(t,o,i,c),a._OrtTrainingReleaseSession=t=>(a._OrtTrainingReleaseSession=S.xa)(t),a._malloc=t=>(a._malloc=S.ya)(t),a._free=t=>(a._free=S.za)(t);var Je=t=>(Je=S.Ba)(t),ot=t=>(ot=S.Ca)(t),C=t=>(C=S.Da)(t),Ne=()=>(Ne=S.Ea)();function it(){var t=S;t=Object.assign({},t);var o=i=>c=>i(c)>>>0;return t.ya=o(t.ya),t.Da=o(t.Da),t.Ea=(i=>()=>i()>>>0)(t.Ea),t}a.stackSave=()=>Ne(),a.stackRestore=t=>ot(t),a.stackAlloc=t=>C(t),a.UTF8ToString=ue,a.stringToUTF8=(t,o,i)=>Se(t,Z,o,i),a.lengthBytesUTF8=Ee;var De;x=function t(){De||Xe(),De||(x=t)};function Xe(){if(!(0<we)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var t=a.preRun.shift();Ie.unshift(t)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<we||De||(De=!0,a.calledRun=!0,de))){for(;0<ne.length;)ne.shift()(a);for(h(a);0<Q.length;)Q.shift()(a)}}}return Xe(),O}})();typeof dr=="object"&&typeof Ct=="object"?Ct.exports=cr:typeof define=="function"&&define.amd&&define([],()=>cr)});var mr=Ze(()=>{});var gr=Ze(()=>{});var hr={};Et(hr,{cpus:()=>en});var en,yr=_t(()=>{en=void 0});var Or=Ze((wr,Ft)=>{"use strict";var br=(()=>{var u=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(u||=__filename),function(d={}){function a(){return Q.buffer!=se.buffer&&ee(),se}function h(){return Q.buffer!=se.buffer&&ee(),xe}function f(){return Q.buffer!=se.buffer&&ee(),ce}function O(){return Q.buffer!=se.buffer&&ee(),ye}function g(){return Q.buffer!=se.buffer&&ee(),ae}var s=d,T,U,H=new Promise((e,r)=>{T=e,U=r}),A=Object.assign({},s),I="./this.program",J=(e,r)=>{throw r},R=typeof window=="object",B=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",M=s.ENVIRONMENT_IS_PTHREAD||!1,L="";function W(e){return s.locateFile?s.locateFile(e,L):L+e}var de,pe,Z;if(D){var E=(Tt(),et(St)),X=(Mt(),et(At));L=B?X.dirname(L)+"/":__dirname+"/",de=(e,r)=>(e=ue(e)?new URL(e):X.normalize(e),E.readFileSync(e,r?void 0:"utf8")),Z=e=>(e=de(e,!0),e.buffer||(e=new Uint8Array(e)),e),pe=(e,r,n,l=!0)=>{e=ue(e)?new URL(e):X.normalize(e),E.readFile(e,l?void 0:"utf8",(b,y)=>{b?n(b):r(l?y.buffer:y)})},!s.thisProgram&&1<process.argv.length&&(I=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),J=(e,r)=>{throw process.exitCode=e,r},global.Worker=mr().Worker}else(R||B)&&(B?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),typeof u<"u"&&u&&(L=u),L.startsWith("blob:")?L="":L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),D||(de=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},B&&(Z=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),pe=(e,r,n)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):n()},l.onerror=n,l.send(null)}));D&&typeof performance>"u"&&(global.performance=gr().performance);var Pe=console.log.bind(console),le=console.error.bind(console);D&&(Pe=(...e)=>E.writeSync(1,e.join(" ")+`\n`),le=(...e)=>E.writeSync(2,e.join(" ")+`\n`));var Ie=Pe,ne=le;Object.assign(s,A),A=null;var Q,we,me=!1,x,se,xe,ce,ye,ae;function ee(){var e=Q.buffer;s.HEAP8=se=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=xe=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=ce=new Int32Array(e),s.HEAPU32=ye=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=ae=new Float64Array(e)}var Ye=16777216;if(M)Q=s.wasmMemory;else if(s.wasmMemory)Q=s.wasmMemory;else if(Q=new WebAssembly.Memory({initial:Ye/65536,maximum:65536,shared:!0}),!(Q.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),D&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");ee(),Ye=Q.buffer.byteLength;var Oe=[],Ue=[],ve=[],Te=0,_e=null,ge=null;function Be(){if(Te--,Te==0&&(_e!==null&&(clearInterval(_e),_e=null),ge)){var e=ge;ge=null,e()}}function te(e){throw e="Aborted("+e+")",ne(e),me=!0,x=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),U(e),e}var re=e=>e.startsWith("data:application/octet-stream;base64,"),ue=e=>e.startsWith("file://"),Ee;Ee="ort-wasm-threaded.wasm",re(Ee)||(Ee=W(Ee));function Se(e){if(Z)return Z(e);throw"both async and sync fetching of the wasm failed"}function Le(e){if(R||B){if(typeof fetch=="function"&&!ue(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at \'${e}\'`;return r.arrayBuffer()}).catch(()=>Se(e));if(pe)return new Promise((r,n)=>{pe(e,l=>r(new Uint8Array(l)),n)})}return Promise.resolve().then(()=>Se(e))}function je(e,r,n){return Le(e).then(l=>WebAssembly.instantiate(l,r)).then(n,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),te(l)})}function rt(e,r){var n=Ee;return typeof WebAssembly.instantiateStreaming!="function"||re(n)||ue(n)||D||typeof fetch!="function"?je(n,e,r):fetch(n,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(b){return ne(`wasm streaming compile failed: ${b}`),ne("falling back to ArrayBuffer instantiation"),je(n,e,r)}))}var Ae,Ge={799444:(e,r,n,l)=>{if(typeof s>"u"||!s.bb)return 1;if(e=j(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.bb.get(e),!e)return 2;if(r>>>=0,n>>>=0,l>>>=0,r+n>e.byteLength)return 3;try{return h().set(e.subarray(r,r+n),l>>>0),0}catch{return 4}}};function ke(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var We=e=>{e.terminate(),e.onmessage=()=>{}},nt=e=>{C.Oa.length==0&&(Je(),C.Xa(C.Oa[0]));var r=C.Oa.pop();if(!r)return 6;C.Pa.push(r),C.La[e.Na]=r,r.Na=e.Na;var n={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return D&&r.unref(),r.postMessage(n,e.mb),0},Fe=0,at=e=>{var r=Ot();return e=e(),ft(r),e},G=(e,r,...n)=>at(()=>{for(var l=n.length,b=wt(8*l),y=b>>>3,v=0;v<n.length;v++){var q=n[v];g()[y+v>>>0]=q}return rr(e,0,l,b,r)});function qe(e){if(M)return G(0,1,e);x=e,0<Fe||(C.hb(),s.onExit?.(e),me=!0),J(e,new ke(e))}var Ve=e=>{if(x=e,M)throw it(e),"unwind";qe(e)};function S(){for(var e=s.numThreads;e--;)Je();Oe.unshift(()=>{Te++,ot(()=>Be())})}function Je(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),C.Oa.push(e)}function ot(e){M?e():Promise.all(C.Oa.map(C.Xa)).then(e)}var C={Oa:[],Pa:[],ab:[],La:{},Va(){M?(C.receiveObjectTransfer=C.fb,C.threadInitTLS=C.$a,C.setExitStatus=C.Za):S()},Za:e=>x=e,pb:["$terminateWorker"],hb:()=>{for(var e of C.Pa)We(e);for(e of C.Oa)We(e);C.Oa=[],C.Pa=[],C.La=[]},Ya:e=>{var r=e.Na;delete C.La[r],C.Oa.push(e),C.Pa.splice(C.Pa.indexOf(e),1),e.Na=0,yt(r)},fb(){},$a(){C.ab.forEach(e=>e())},Xa:e=>new Promise(r=>{e.onmessage=y=>{y=y.data;var v=y.cmd;if(y.targetThread&&y.targetThread!=ut()){var q=C.La[y.targetThread];q?q.postMessage(y,y.transferList):ne(`Internal error! Worker sent a message "${v}" to target pthread ${y.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?st():v==="spawnThread"?nt(y):v==="cleanupThread"?C.Ya(C.La[y.thread]):v==="killThread"?(y=y.thread,v=C.La[y],delete C.La[y],We(v),yt(y),C.Pa.splice(C.Pa.indexOf(v),1),v.Na=0):v==="cancelThread"?C.La[y.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,D&&!e.Na&&e.unref(),r(e)):v==="alert"?alert(`Thread ${y.threadId}: ${y.text}`):y.target==="setimmediate"?e.postMessage(y):v==="callHandler"?s[y.handler](...y.args):v&&ne(`worker sent an unknown command ${v}`)},e.onerror=y=>{throw ne(`worker sent an error! ${y.filename}:${y.lineno}: ${y.message}`),y},D&&(e.on("message",y=>e.onmessage({data:y})),e.on("error",y=>e.onerror(y)));var n=[],l=["onExit"],b;for(b of l)s.hasOwnProperty(b)&&n.push(b);e.postMessage({cmd:"load",handlers:n,urlOrBlob:s.mainScriptUrlOrBlob||u,wasmMemory:Q,wasmModule:we})})};s.PThread=C;var Ne=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=ut(),r=O()[e+52>>>2>>>0];e=O()[e+56>>>2>>>0],or(r,r-e),ft(r)};function it(e){if(M)return G(1,0,e);Ve(e)}var De=[],Xe;s.invokeEntryPoint=(e,r)=>{Fe=0;var n=De[e];n||(e>=De.length&&(De.length=e+1),De[e]=n=Xe.get(e)),e=n(r),0<Fe?C.Za(e):bt(e)};class t{constructor(r){this.Ua=r-24}Va(r,n){O()[this.Ua+16>>>2>>>0]=0,O()[this.Ua+4>>>2>>>0]=r,O()[this.Ua+8>>>2>>>0]=n}}var o=0,i=0;function c(e,r,n,l){return M?G(2,1,e,r,n,l):w(e,r,n,l)}function w(e,r,n,l){if(e>>>=0,r>>>=0,n>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var b=[];return M&&b.length===0?c(e,r,n,l):(e={gb:n,Na:e,cb:l,mb:b},M?(e.ob="spawnThread",postMessage(e,b),0):nt(e))}var _=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,P=(e,r,n)=>{r>>>=0;var l=r+n;for(n=r;e[n]&&!(n>=l);)++n;if(16<n-r&&e.buffer&&_)return _.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,n):e.subarray(r,n));for(l="";r<n;){var b=e[r++];if(b&128){var y=e[r++]&63;if((b&224)==192)l+=String.fromCharCode((b&31)<<6|y);else{var v=e[r++]&63;b=(b&240)==224?(b&15)<<12|y<<6|v:(b&7)<<18|y<<12|v<<6|e[r++]&63,65536>b?l+=String.fromCharCode(b):(b-=65536,l+=String.fromCharCode(55296|b>>10,56320|b&1023))}}else l+=String.fromCharCode(b)}return l},j=(e,r)=>(e>>>=0)?P(h(),e,r):"";function be(e,r,n){return M?G(3,1,e,r,n):0}function oe(e,r){if(M)return G(4,1,e,r)}var ie=e=>{for(var r=0,n=0;n<e.length;++n){var l=e.charCodeAt(n);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++n):r+=3}return r},Qe=(e,r,n,l)=>{if(n>>>=0,!(0<l))return 0;var b=n;l=n+l-1;for(var y=0;y<e.length;++y){var v=e.charCodeAt(y);if(55296<=v&&57343>=v){var q=e.charCodeAt(++y);v=65536+((v&1023)<<10)|q&1023}if(127>=v){if(n>=l)break;r[n++>>>0]=v}else{if(2047>=v){if(n+1>=l)break;r[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=l)break;r[n++>>>0]=224|v>>12}else{if(n+3>=l)break;r[n++>>>0]=240|v>>18,r[n++>>>0]=128|v>>12&63}r[n++>>>0]=128|v>>6&63}r[n++>>>0]=128|v&63}}return r[n>>>0]=0,n-b},Re=(e,r,n)=>Qe(e,h(),r,n);function p(e,r){if(M)return G(5,1,e,r)}function k(e,r,n){if(M)return G(6,1,e,r,n)}function $(e,r,n){return M?G(7,1,e,r,n):0}function Me(e,r){if(M)return G(8,1,e,r)}function Ke(e,r,n){if(M)return G(9,1,e,r,n)}function Rt(e,r,n,l){if(M)return G(10,1,e,r,n,l)}function It(e,r,n,l){if(M)return G(11,1,e,r,n,l)}function Bt(e,r,n,l){if(M)return G(12,1,e,r,n,l)}function kt(e){if(M)return G(13,1,e)}function Wt(e,r){if(M)return G(14,1,e,r)}function Nt(e,r,n){if(M)return G(15,1,e,r,n)}function dt(e){e>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(f(),e>>>2,e).value.then(st),e+=128,Atomics.store(f(),e>>>2,1))}s.__emscripten_thread_mailbox_await=dt;var st=()=>{var e=ut();if(e&&(dt(e),e=nr,!me))try{if(e(),!(0<Fe))try{M?bt(x):Ve(x)}catch(r){r instanceof ke||r=="unwind"||J(1,r)}}catch(r){r instanceof ke||r=="unwind"||J(1,r)}};s.checkMailbox=st;var pt=[],$e=e=>e%4===0&&(e%100!==0||e%400===0),Ht=[0,31,60,91,121,152,182,213,244,274,305,335],Gt=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,r,n,l,b,y,v,q){return M?G(16,1,e,r,n,l,b,y,v,q):-52}function zt(e,r,n,l,b,y,v){if(M)return G(17,1,e,r,n,l,b,y,v)}var mt=[],gt={},Yt=()=>{if(!ht){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:I||"./this.program"},r;for(r in gt)gt[r]===void 0?delete e[r]:e[r]=gt[r];var n=[];for(r in e)n.push(`${r}=${e[r]}`);ht=n}return ht},ht;function jt(e,r){if(M)return G(18,1,e,r);e>>>=0,r>>>=0;var n=0;return Yt().forEach((l,b)=>{var y=r+n;for(b=O()[e+4*b>>>2>>>0]=y,y=0;y<l.length;++y)a()[b++>>>0]=l.charCodeAt(y);a()[b>>>0]=0,n+=l.length+1}),0}function qt(e,r){if(M)return G(19,1,e,r);e>>>=0,r>>>=0;var n=Yt();O()[e>>>2>>>0]=n.length;var l=0;return n.forEach(b=>l+=b.length+1),O()[r>>>2>>>0]=l,0}function Vt(e){return M?G(20,1,e):52}function Jt(e,r,n,l){return M?G(21,1,e,r,n,l):52}function Xt(e,r,n,l,b){return M?G(22,1,e,r,n,l,b):70}var Hr=[null,[],[]];function Qt(e,r,n,l){if(M)return G(23,1,e,r,n,l);r>>>=0,n>>>=0,l>>>=0;for(var b=0,y=0;y<n;y++){var v=O()[r>>>2>>>0],q=O()[r+4>>>2>>>0];r+=8;for(var Ce=0;Ce<q;Ce++){var fe=h()[v+Ce>>>0],he=Hr[e];fe===0||fe===10?((e===1?Ie:ne)(P(he,0)),he.length=0):he.push(fe)}b+=q}return O()[l>>>2>>>0]=b,0}var Kt=[31,29,31,30,31,30,31,31,30,31,30,31],Zt=[31,28,31,30,31,30,31,31,30,31,30,31];function Gr(e){var r=Array(ie(e)+1);return Qe(e,r,0,r.length),r}var $r=(e,r)=>{a().set(e,r>>>0)};function er(e,r,n,l){function b(m,N,V){for(m=typeof m=="number"?m.toString():m||"";m.length<N;)m=V[0]+m;return m}function y(m,N){return b(m,N,"0")}function v(m,N){function V(fr){return 0>fr?-1:0<fr?1:0}var He;return(He=V(m.getFullYear()-N.getFullYear()))===0&&(He=V(m.getMonth()-N.getMonth()))===0&&(He=V(m.getDate()-N.getDate())),He}function q(m){switch(m.getDay()){case 0:return new Date(m.getFullYear()-1,11,29);case 1:return m;case 2:return new Date(m.getFullYear(),0,3);case 3:return new Date(m.getFullYear(),0,2);case 4:return new Date(m.getFullYear(),0,1);case 5:return new Date(m.getFullYear()-1,11,31);case 6:return new Date(m.getFullYear()-1,11,30)}}function Ce(m){var N=m.Qa;for(m=new Date(new Date(m.Ra+1900,0,1).getTime());0<N;){var V=m.getMonth(),He=($e(m.getFullYear())?Kt:Zt)[V];if(N>He-m.getDate())N-=He-m.getDate()+1,m.setDate(1),11>V?m.setMonth(V+1):(m.setMonth(0),m.setFullYear(m.getFullYear()+1));else{m.setDate(m.getDate()+N);break}}return V=new Date(m.getFullYear()+1,0,4),N=q(new Date(m.getFullYear(),0,4)),V=q(V),0>=v(N,m)?0>=v(V,m)?m.getFullYear()+1:m.getFullYear():m.getFullYear()-1}e>>>=0,r>>>=0,n>>>=0,l>>>=0;var fe=O()[l+40>>>2>>>0];l={kb:f()[l>>>2>>>0],jb:f()[l+4>>>2>>>0],Sa:f()[l+8>>>2>>>0],Wa:f()[l+12>>>2>>>0],Ta:f()[l+16>>>2>>>0],Ra:f()[l+20>>>2>>>0],Ma:f()[l+24>>>2>>>0],Qa:f()[l+28>>>2>>>0],qb:f()[l+32>>>2>>>0],ib:f()[l+36>>>2>>>0],lb:fe?j(fe):""},n=j(n),fe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var he in fe)n=n.replace(new RegExp(he,"g"),fe[he]);var sr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ur="January February March April May June July August September October November December".split(" ");fe={"%a":m=>sr[m.Ma].substring(0,3),"%A":m=>sr[m.Ma],"%b":m=>ur[m.Ta].substring(0,3),"%B":m=>ur[m.Ta],"%C":m=>y((m.Ra+1900)/100|0,2),"%d":m=>y(m.Wa,2),"%e":m=>b(m.Wa,2," "),"%g":m=>Ce(m).toString().substring(2),"%G":Ce,"%H":m=>y(m.Sa,2),"%I":m=>(m=m.Sa,m==0?m=12:12<m&&(m-=12),y(m,2)),"%j":m=>{for(var N=0,V=0;V<=m.Ta-1;N+=($e(m.Ra+1900)?Kt:Zt)[V++]);return y(m.Wa+N,3)},"%m":m=>y(m.Ta+1,2),"%M":m=>y(m.jb,2),"%n":()=>`\n`,"%p":m=>0<=m.Sa&&12>m.Sa?"AM":"PM","%S":m=>y(m.kb,2),"%t":()=>"	","%u":m=>m.Ma||7,"%U":m=>y(Math.floor((m.Qa+7-m.Ma)/7),2),"%V":m=>{var N=Math.floor((m.Qa+7-(m.Ma+6)%7)/7);if(2>=(m.Ma+371-m.Qa-2)%7&&N++,N)N==53&&(V=(m.Ma+371-m.Qa)%7,V==4||V==3&&$e(m.Ra)||(N=1));else{N=52;var V=(m.Ma+7-m.Qa-1)%7;(V==4||V==5&&$e(m.Ra%400-1))&&N++}return y(N,2)},"%w":m=>m.Ma,"%W":m=>y(Math.floor((m.Qa+7-(m.Ma+6)%7)/7),2),"%y":m=>(m.Ra+1900).toString().substring(2),"%Y":m=>m.Ra+1900,"%z":m=>{m=m.ib;var N=0<=m;return m=Math.abs(m)/60,(N?"+":"-")+("0000"+(m/60*100+m%60)).slice(-4)},"%Z":m=>m.lb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(he in fe)n.includes(he)&&(n=n.replace(new RegExp(he,"g"),fe[he](l)));return n=n.replace(/\\0\\0/g,"%"),he=Gr(n),he.length>r?0:($r(he,e),he.length-1)}C.Va();var zr=[qe,it,c,be,oe,p,k,$,Me,Ke,Rt,It,Bt,kt,Wt,Nt,$t,zt,jt,qt,Vt,Jt,Xt,Qt],Yr={b:function(e,r,n){throw e>>>=0,new t(e).Va(r>>>0,n>>>0),o=e,i++,o},L:function(e){tr(e>>>0,!B,1,!R,131072,!1),C.$a()},j:function(e){e>>>=0,M?postMessage({cmd:"cleanupThread",thread:e}):C.Ya(C.La[e])},H:w,h:be,S:oe,D:p,F:k,T:$,Q:Me,J:Ke,P:Rt,n:It,E:Bt,B:kt,R:Wt,C:Nt,p:()=>1,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(st):M?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=C.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,r,n,l,b){r>>>=0,n>>>=0,pt.length=l,b=b>>>0>>>3;for(var y=0;y<l;y++)pt[y]=g()[b+y>>>0];return e=r?Ge[r]:zr[e],C.eb=n,n=e(...pt),C.eb=0,n},K:dt,o:function(e){D&&C.La[e>>>0].ref()},s:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getUTCSeconds(),f()[n+4>>>2>>>0]=e.getUTCMinutes(),f()[n+8>>>2>>>0]=e.getUTCHours(),f()[n+12>>>2>>>0]=e.getUTCDate(),f()[n+16>>>2>>>0]=e.getUTCMonth(),f()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[n+28>>>2>>>0]=e},t:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getSeconds(),f()[n+4>>>2>>>0]=e.getMinutes(),f()[n+8>>>2>>>0]=e.getHours(),f()[n+12>>>2>>>0]=e.getDate(),f()[n+16>>>2>>>0]=e.getMonth(),f()[n+20>>>2>>>0]=e.getFullYear()-1900,f()[n+24>>>2>>>0]=e.getDay(),r=($e(e.getFullYear())?Ht:Gt)[e.getMonth()]+e.getDate()-1|0,f()[n+28>>>2>>>0]=r,f()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,f()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var r=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),n=f()[e+32>>>2>>>0],l=r.getTimezoneOffset(),b=new Date(r.getFullYear(),6,1).getTimezoneOffset(),y=new Date(r.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(y,b);return 0>n?f()[e+32>>>2>>>0]=+(b!=y&&v==l):0<n!=(v==l)&&(b=Math.max(y,b),r.setTime(r.getTime()+6e4*((0<n?v:b)-l))),f()[e+24>>>2>>>0]=r.getDay(),n=($e(r.getFullYear())?Ht:Gt)[r.getMonth()]+r.getDate()-1|0,f()[e+28>>>2>>>0]=n,f()[e>>>2>>>0]=r.getSeconds(),f()[e+4>>>2>>>0]=r.getMinutes(),f()[e+8>>>2>>>0]=r.getHours(),f()[e+12>>>2>>>0]=r.getDate(),f()[e+16>>>2>>>0]=r.getMonth(),f()[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),e=isNaN(e)?-1:e/1e3,ar((Ae=e,1<=+Math.abs(Ae)?0<Ae?+Math.floor(Ae/4294967296)>>>0:~~+Math.ceil((Ae-+(~~Ae>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:zt,y:function(e,r,n,l){e>>>=0,r>>>=0,n>>>=0,l>>>=0;var b=new Date().getFullYear(),y=new Date(b,0,1),v=new Date(b,6,1);b=y.getTimezoneOffset();var q=v.getTimezoneOffset(),Ce=Math.max(b,q);O()[e>>>2>>>0]=60*Ce,f()[r>>>2>>>0]=+(b!=q),e=fe=>fe.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],y=e(y),v=e(v),q<b?(Re(y,n,17),Re(v,l,17)):(Re(y,l,17),Re(v,n,17))},c:()=>{te("")},O:function(e,r,n){e>>>=0,r>>>=0,n>>>=0,mt.length=0;for(var l;l=h()[r++>>>0];){var b=l!=105;b&=l!=112,n+=b&&n%8?4:0,mt.push(l==112?O()[n>>>2>>>0]:l==105?f()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=b?8:4}return Ge[e](...mt)},k:()=>{},i:()=>Date.now(),U:()=>{throw Fe+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>D?(yr(),et(hr)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var r=h().length;if(e<=r||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var l=r*(1+.2/n);l=Math.min(l,e+100663296);var b=Math;l=Math.max(e,l);e:{b=(b.min.call(b,4294901760,l+(65536-l%65536)%65536)-Q.buffer.byteLength+65535)/65536;try{Q.grow(b),ee();var y=1;break e}catch{}y=void 0}if(y)return!0}return!1},M:jt,N:qt,G:Ve,g:Vt,m:Jt,v:Xt,l:Qt,a:Q||s.wasmMemory,w:er,d:function(e,r,n,l){return er(e>>>0,r>>>0,n>>>0,l>>>0)}},F=function(){function e(n,l){return F=n.exports,F=jr(),C.ab.push(F.ya),Xe=F.za,Ue.unshift(F.V),we=l,Be(),F}var r={a:Yr};if(Te++,s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(n){ne(`Module.instantiateWasm callback failed with error: ${n}`),U(n)}return rt(r,function(n){e(n.instance,n.module)}).catch(U),{}}();s._OrtInit=(e,r)=>(s._OrtInit=F.W)(e,r),s._OrtGetLastError=(e,r)=>(s._OrtGetLastError=F.X)(e,r),s._OrtCreateSessionOptions=(e,r,n,l,b,y,v,q,Ce,fe)=>(s._OrtCreateSessionOptions=F.Y)(e,r,n,l,b,y,v,q,Ce,fe),s._OrtAppendExecutionProvider=(e,r)=>(s._OrtAppendExecutionProvider=F.Z)(e,r),s._OrtAddFreeDimensionOverride=(e,r,n)=>(s._OrtAddFreeDimensionOverride=F._)(e,r,n),s._OrtAddSessionConfigEntry=(e,r,n)=>(s._OrtAddSessionConfigEntry=F.$)(e,r,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=F.aa)(e),s._OrtCreateSession=(e,r,n)=>(s._OrtCreateSession=F.ba)(e,r,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=F.ca)(e),s._OrtGetInputOutputCount=(e,r,n)=>(s._OrtGetInputOutputCount=F.da)(e,r,n),s._OrtGetInputName=(e,r)=>(s._OrtGetInputName=F.ea)(e,r),s._OrtGetOutputName=(e,r)=>(s._OrtGetOutputName=F.fa)(e,r),s._OrtFree=e=>(s._OrtFree=F.ga)(e),s._OrtCreateTensor=(e,r,n,l,b,y)=>(s._OrtCreateTensor=F.ha)(e,r,n,l,b,y),s._OrtGetTensorData=(e,r,n,l,b)=>(s._OrtGetTensorData=F.ia)(e,r,n,l,b),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=F.ja)(e),s._OrtCreateRunOptions=(e,r,n,l)=>(s._OrtCreateRunOptions=F.ka)(e,r,n,l),s._OrtAddRunConfigEntry=(e,r,n)=>(s._OrtAddRunConfigEntry=F.la)(e,r,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=F.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=F.na)(e),s._OrtBindInput=(e,r,n)=>(s._OrtBindInput=F.oa)(e,r,n),s._OrtBindOutput=(e,r,n,l)=>(s._OrtBindOutput=F.pa)(e,r,n,l),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=F.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=F.ra)(e),s._OrtRunWithBinding=(e,r,n,l,b)=>(s._OrtRunWithBinding=F.sa)(e,r,n,l,b),s._OrtRun=(e,r,n,l,b,y,v,q)=>(s._OrtRun=F.ta)(e,r,n,l,b,y,v,q),s._OrtEndProfiling=e=>(s._OrtEndProfiling=F.ua)(e);var ut=s._pthread_self=()=>(ut=s._pthread_self=F.va)();s._malloc=e=>(s._malloc=F.wa)(e),s._free=e=>(s._free=F.xa)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=F.ya)();var tr=s.__emscripten_thread_init=(e,r,n,l,b,y)=>(tr=s.__emscripten_thread_init=F.Aa)(e,r,n,l,b,y);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=F.Ba)();var rr=(e,r,n,l,b)=>(rr=F.Ca)(e,r,n,l,b),yt=e=>(yt=F.Da)(e),bt=s.__emscripten_thread_exit=e=>(bt=s.__emscripten_thread_exit=F.Ea)(e),nr=()=>(nr=F.Fa)(),ar=e=>(ar=F.Ga)(e),or=(e,r)=>(or=F.Ha)(e,r),ft=e=>(ft=F.Ia)(e),wt=e=>(wt=F.Ja)(e),Ot=()=>(Ot=F.Ka)();function jr(){var e=F;e=Object.assign({},e);var r=l=>()=>l()>>>0,n=l=>b=>l(b)>>>0;return e.va=r(e.va),e.wa=n(e.wa),e.emscripten_main_runtime_thread_id=r(e.emscripten_main_runtime_thread_id),e.Ja=n(e.Ja),e.Ka=r(e.Ka),e}s.wasmMemory=Q,s.stackSave=()=>Ot(),s.stackRestore=e=>ft(e),s.stackAlloc=e=>wt(e),s.keepRuntimeAlive=()=>0<Fe,s.UTF8ToString=j,s.stringToUTF8=Re,s.lengthBytesUTF8=ie,s.ExitStatus=ke,s.PThread=C;var lt;ge=function e(){lt||ir(),lt||(ge=e)};function ir(){if(!(0<Te))if(M)T(s),M||Ne(Ue),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Oe.unshift(s.preRun.shift());Ne(Oe),0<Te||lt||(lt=!0,s.calledRun=!0,me||(M||Ne(Ue),T(s),M||Ne(ve)))}}return ir(),H}})();typeof wr=="object"&&typeof Ft=="object"?Ft.exports=br:typeof define=="function"&&define.amd&&define([],()=>br)});var vr=Ze((bn,tn)=>{tn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var Er;Er=pr();var rn=Or(),Dt,Pt=!1,ct=!1,_r=!1,nn=u=>{if(u===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+u+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+u+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},on=(u,d)=>u?"ort-training-wasm-simd.wasm":d?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Sr=async u=>{if(Pt)return Promise.resolve();if(ct)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(_r)throw new Error("previous call to \'initializeWebAssembly()\' failed.");ct=!0;let d=u.initTimeout,a=u.numThreads,h=u.simd,f=nn(a),O=h&&an(),g=u.wasmPaths,s=typeof g=="string"?g:void 0,T=on(O,f),U=typeof g=="object"?g[T]:void 0,H=!1,A=[];if(d>0&&A.push(new Promise(I=>{setTimeout(()=>{H=!0,I()},d)})),A.push(new Promise((I,J)=>{let R=f?rn:Er,B={locateFile:(D,M)=>f&&D.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([vr()],{type:"text/javascript"})):D.endsWith(".wasm")?U||(s??M)+T:M+D};if(f)if(B.numThreads=a,typeof Blob>"u")B.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let D=`var ortWasmThreaded=${R.toString()};`;B.mainScriptUrlOrBlob=new Blob([D],{type:"text/javascript"})}R(B).then(D=>{ct=!1,Pt=!0,Dt=D,I()},D=>{ct=!1,_r=!0,J(D)})})),await Promise.race(A),H)throw new Error(`WebAssembly backend initializing failed due to timeout: ${d}ms`)},K=()=>{if(Pt&&Dt)return Dt;throw new Error("WebAssembly is not initialized yet.")};var z=(u,d)=>{let a=K(),h=a.lengthBytesUTF8(u)+1,f=a._malloc(h);return a.stringToUTF8(u,f,h),d.push(f),f},tt=(u,d,a,h)=>{if(typeof u=="object"&&u!==null){if(a.has(u))throw new Error("Circular reference in options");a.add(u)}Object.entries(u).forEach(([f,O])=>{let g=d?d+f:f;if(typeof O=="object")tt(O,g+".",a,h);else if(typeof O=="string"||typeof O=="number")h(g,O.toString());else if(typeof O=="boolean")h(g,O?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof O}`)})},Y=u=>{let d=K(),a=d.stackSave();try{let h=d.stackAlloc(8);d._OrtGetLastError(h,h+4);let f=d.HEAP32[h/4],O=d.HEAPU32[h/4+1],g=O?d.UTF8ToString(O):"";throw new Error(`${u} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{d.stackRestore(a)}};var Tr=u=>{let d=K(),a=0,h=[],f=u||{};try{if(u?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof u.logSeverityLevel!="number"||!Number.isInteger(u.logSeverityLevel)||u.logSeverityLevel<0||u.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${u.logSeverityLevel}`);if(u?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof u.logVerbosityLevel!="number"||!Number.isInteger(u.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${u.logVerbosityLevel}`);u?.terminate===void 0&&(f.terminate=!1);let O=0;return u?.tag!==void 0&&(O=z(u.tag,h)),a=d._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,O),a===0&&Y("Can\'t create run options."),u?.extra!==void 0&&tt(u.extra,"",new WeakSet,(g,s)=>{let T=z(g,h),U=z(s,h);d._OrtAddRunConfigEntry(a,T,U)!==0&&Y(`Can\'t set a run config entry: ${g} - ${s}.`)}),[a,h]}catch(O){throw a!==0&&d._OrtReleaseRunOptions(a),h.forEach(g=>d._free(g)),O}};var sn=u=>{switch(u){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${u}`)}},un=u=>{switch(u){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${u}`)}},fn=u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});let d=u.extra.session;d.use_ort_model_bytes_directly||(d.use_ort_model_bytes_directly="1"),u.executionProviders&&u.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(u.enableMemPattern=!1)},ln=(u,d,a)=>{for(let h of d){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let s=z("deviceType",a),T=z(g.deviceType,a);K()._OrtAddSessionConfigEntry(u,s,T)!==0&&Y(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let s=g.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let T=z("numThreads",a),U=z(s.toString(),a);K()._OrtAddSessionConfigEntry(u,T,U)!==0&&Y(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let s=z("powerPreference",a),T=z(g.powerPreference,a);K()._OrtAddSessionConfigEntry(u,s,T)!==0&&Y(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let s=z("preferredLayout",a),T=z(g.preferredLayout,a);K()._OrtAddSessionConfigEntry(u,s,T)!==0&&Y(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let O=z(f,a);K()._OrtAppendExecutionProvider(u,O)!==0&&Y(`Can\'t append execution provider: ${f}.`)}},Ar=u=>{let d=K(),a=0,h=[],f=u||{};fn(f);try{let O=sn(f.graphOptimizationLevel??"all"),g=un(f.executionMode??"sequential"),s=typeof f.logId=="string"?z(f.logId,h):0,T=f.logSeverityLevel??2;if(!Number.isInteger(T)||T<0||T>4)throw new Error(`log serverity level is not valid: ${T}`);let U=f.logVerbosityLevel??0;if(!Number.isInteger(U)||U<0||U>4)throw new Error(`log verbosity level is not valid: ${U}`);let H=typeof f.optimizedModelFilePath=="string"?z(f.optimizedModelFilePath,h):0;if(a=d._OrtCreateSessionOptions(O,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,s,T,U,H),a===0&&Y("Can\'t create session options."),f.executionProviders&&ln(a,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let A=z("enableGraphCapture",h),I=z(f.enableGraphCapture.toString(),h);d._OrtAddSessionConfigEntry(a,A,I)!==0&&Y(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[A,I]of Object.entries(f.freeDimensionOverrides)){if(typeof A!="string")throw new Error(`free dimension override name must be a string: ${A}`);if(typeof I!="number"||!Number.isInteger(I)||I<0)throw new Error(`free dimension override value must be a non-negative integer: ${I}`);let J=z(A,h);d._OrtAddFreeDimensionOverride(a,J,I)!==0&&Y(`Can\'t set a free dimension override: ${A} - ${I}.`)}return f.extra!==void 0&&tt(f.extra,"",new WeakSet,(A,I)=>{let J=z(A,h),R=z(I,h);d._OrtAddSessionConfigEntry(a,J,R)!==0&&Y(`Can\'t set a session config entry: ${A} - ${I}.`)}),[a,h]}catch(O){throw a!==0&&d._OrtReleaseSessionOptions(a),h.forEach(g=>d._free(g)),O}};var xt=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},Mr=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},Ut=u=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][u],Cr=u=>{switch(u){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}},Fr=u=>{switch(u){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${u}`)}},Dr=u=>u==="float32"||u==="float16"||u==="int32"||u==="int64"||u==="uint32"||u==="uint8"||u==="bool",Pr=u=>{switch(u){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${u}`)}};var xr=async u=>{if(typeof u=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(u))}catch(d){if(d.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(u),h=[];for await(let f of a)h.push(f);return new Uint8Array(Buffer.concat(h))}throw d}else{let d=await fetch(u);if(!d.ok)throw new Error(`failed to load external data file: ${u}`);let a=d.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await d.arrayBuffer());{if(!d.body)throw new Error(`failed to load external data file: ${u}, no response body.`);let f=d.body.getReader(),O;try{O=new ArrayBuffer(h)}catch(s){if(s instanceof RangeError){let T=Math.ceil(h/65536);O=new WebAssembly.Memory({initial:T,maximum:T}).buffer}else throw s}let g=0;for(;;){let{done:s,value:T}=await f.read();if(s)break;let U=T.byteLength;new Uint8Array(O,g,U).set(T),g+=U}return new Uint8Array(O,0,h)}}else return u instanceof Blob?new Uint8Array(await u.arrayBuffer()):u instanceof Uint8Array?u:new Uint8Array(u)};var cn=(u,d)=>{K()._OrtInit(u,d)!==0&&Y("Can\'t initialize onnxruntime.")},Lr=async u=>{cn(u.wasm.numThreads,Fr(u.logLevel))},Rr=async(u,d)=>{},ze=new Map,dn=u=>{let d=K(),a=d.stackSave();try{let h=d.stackAlloc(8);return d._OrtGetInputOutputCount(u,h,h+4)!==0&&Y("Can\'t get session input/output count."),[d.HEAP32[h/4],d.HEAP32[h/4+1]]}finally{d.stackRestore(a)}},Lt=u=>{let d=K(),a=d._malloc(u.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${u.byteLength}.`);return d.HEAPU8.set(u,a),[a,u.byteLength]},Ir=async(u,d)=>{let a,h,f=K();Array.isArray(u)?[a,h]=u:u.buffer===f.HEAPU8.buffer?[a,h]=[u.byteOffset,u.byteLength]:[a,h]=Lt(u);let O=0,g=0,s=0,T=[],U=[],H=[];try{if([g,T]=Ar(d),d?.externalData&&f.mountExternalData){let L=[];for(let W of d.externalData){let de=typeof W=="string"?W:W.path;L.push(xr(typeof W=="string"?W:W.data).then(pe=>{f.mountExternalData(de,pe)}))}await Promise.all(L)}O=await f._OrtCreateSession(a,h,g),O===0&&Y("Can\'t create a session.");let[A,I]=dn(O),J=!!d?.enableGraphCapture,R=[],B=[],D=[];for(let L=0;L<A;L++){let W=f._OrtGetInputName(O,L);W===0&&Y("Can\'t get an input name."),U.push(W),R.push(f.UTF8ToString(W))}for(let L=0;L<I;L++){let W=f._OrtGetOutputName(O,L);W===0&&Y("Can\'t get an output name."),H.push(W);let de=f.UTF8ToString(W);B.push(de)}let M=null;return ze.set(O,[O,U,H,M,J,!1]),[O,R,B]}catch(A){throw U.forEach(I=>f._OrtFree(I)),H.forEach(I=>f._OrtFree(I)),s!==0&&f._OrtReleaseBinding(s),O!==0&&f._OrtReleaseSession(O),A}finally{f._free(a),g!==0&&f._OrtReleaseSessionOptions(g),T.forEach(A=>f._free(A)),f.unmountExternalData?.()}},Br=u=>{let d=K(),a=ze.get(u);if(!a)throw new Error(`cannot release session. invalid session id: ${u}`);let[h,f,O,g,s]=a;g&&(s&&d._OrtClearBoundOutputs(g.handle),d._OrtReleaseBinding(g.handle)),d.jsepOnReleaseSession?.(u),f.forEach(T=>d._OrtFree(T)),O.forEach(T=>d._OrtFree(T)),d._OrtReleaseSession(h),ze.delete(u)},Ur=(u,d,a,h,f,O=!1)=>{if(!u){d.push(0);return}let g=K(),s=u[0],T=u[1],U=u[3],H,A;if(s==="string"&&U==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(O&&U!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(U==="gpu-buffer"){let R=u[2].gpuBuffer,B=Ut(xt(s));A=T.reduce((M,L)=>M*L,1)*B;let D=g.jsepRegisterBuffer;if(!D)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');H=D(h,f,R,A)}else{let R=u[2];if(Array.isArray(R)){A=4*R.length,H=g._malloc(A),a.push(H);let B=H/4;for(let D=0;D<R.length;D++){if(typeof R[D]!="string")throw new TypeError(`tensor data at index ${D} is not a string`);g.HEAPU32[B++]=z(R[D],a)}}else A=R.byteLength,H=g._malloc(A),a.push(H),g.HEAPU8.set(new Uint8Array(R.buffer,R.byteOffset,A),H)}let I=g.stackSave(),J=g.stackAlloc(4*T.length);try{let R=J/4;T.forEach(D=>g.HEAP32[R++]=D);let B=g._OrtCreateTensor(xt(s),H,A,J,T.length,Pr(U));B===0&&Y(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),d.push(B)}finally{g.stackRestore(I)}},kr=async(u,d,a,h,f,O)=>{let g=K(),s=ze.get(u);if(!s)throw new Error(`cannot run inference. invalid session id: ${u}`);let T=s[0],U=s[1],H=s[2],A=s[3],I=s[4],J=s[5],R=d.length,B=h.length,D=0,M=[],L=[],W=[],de=[],pe=g.stackSave(),Z=g.stackAlloc(R*4),E=g.stackAlloc(R*4),X=g.stackAlloc(B*4),Pe=g.stackAlloc(B*4);try{[D,M]=Tr(O);for(let x=0;x<R;x++)Ur(a[x],L,de,u,d[x],I);for(let x=0;x<B;x++)Ur(f[x],W,de,u,R+h[x],I);let le=Z/4,Ie=E/4,ne=X/4,Q=Pe/4;for(let x=0;x<R;x++)g.HEAPU32[le++]=L[x],g.HEAPU32[Ie++]=U[d[x]];for(let x=0;x<B;x++)g.HEAPU32[ne++]=W[x],g.HEAPU32[Q++]=H[h[x]];g.jsepOnRunStart?.(T);let we;we=await g._OrtRun(T,E,Z,R,Pe,B,X,D),we!==0&&Y("failed to call OrtRun().");let me=[];for(let x=0;x<B;x++){let se=g.HEAPU32[X/4+x];if(se===W[x]){me.push(f[x]);continue}let xe=g.stackSave(),ce=g.stackAlloc(4*4),ye=!1,ae,ee=0;try{g._OrtGetTensorData(se,ce,ce+4,ce+8,ce+12)!==0&&Y(`Can\'t access output tensor data on index ${x}.`);let Oe=ce/4,Ue=g.HEAPU32[Oe++];ee=g.HEAPU32[Oe++];let ve=g.HEAPU32[Oe++],Te=g.HEAPU32[Oe++],_e=[];for(let te=0;te<Te;te++)_e.push(g.HEAPU32[ve/4+te]);g._OrtFree(ve);let ge=_e.reduce((te,re)=>te*re,1);ae=Mr(Ue);let Be=A?.outputPreferredLocations[h[x]];if(ae==="string"){if(Be==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let te=[],re=ee/4;for(let ue=0;ue<ge;ue++){let Ee=g.HEAPU32[re++],Se=ue===ge-1?void 0:g.HEAPU32[re]-Ee;te.push(g.UTF8ToString(Ee,Se))}me.push([ae,_e,te,"cpu"])}else if(Be==="gpu-buffer"&&ge>0){let te=g.jsepGetBuffer;if(!te)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let re=te(ee),ue=Ut(Ue);if(ue===void 0||!Dr(ae))throw new Error(`Unsupported data type: ${ae}`);ye=!0,me.push([ae,_e,{gpuBuffer:re,download:g.jsepCreateDownloader(re,ge*ue,ae),dispose:()=>{g._OrtReleaseTensor(se)}},"gpu-buffer"])}else{let te=Cr(ae),re=new te(ge);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(g.HEAPU8.subarray(ee,ee+re.byteLength)),me.push([ae,_e,re,"cpu"])}}finally{g.stackRestore(xe),ae==="string"&&ee&&g._free(ee),ye||g._OrtReleaseTensor(se)}}return A&&!I&&(g._OrtClearBoundOutputs(A.handle),ze.set(u,[T,U,H,A,I,!1])),me}finally{g.stackRestore(pe),L.forEach(le=>g._OrtReleaseTensor(le)),W.forEach(le=>g._OrtReleaseTensor(le)),de.forEach(le=>g._free(le)),D!==0&&g._OrtReleaseRunOptions(D),M.forEach(le=>g._free(le))}},Wr=u=>{let d=K(),a=ze.get(u);if(!a)throw new Error("invalid session id");let h=a[0],f=d._OrtEndProfiling(h);f===0&&Y("Can\'t get an profile file name."),d._OrtFree(f)},Nr=u=>{let d=[];for(let a of u){let h=a[2];!Array.isArray(h)&&"buffer"in h&&d.push(h.buffer)}return d};self.onmessage=u=>{let{type:d,in:a}=u.data;try{switch(d){case"init-wasm":Sr(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:d})},h=>{postMessage({type:d,err:h})})},h=>{postMessage({type:d,err:h})});break;case"init-ep":{let{epName:h,env:f}=a;Rr(f,h).then(()=>{postMessage({type:d})},O=>{postMessage({type:d,err:O})});break}case"copy-from":{let{buffer:h}=a,f=Lt(h);postMessage({type:d,out:f});break}case"create":{let{model:h,options:f}=a;Ir(h,f).then(O=>{postMessage({type:d,out:O})},O=>{postMessage({type:d,err:O})});break}case"release":Br(a),postMessage({type:d});break;case"run":{let{sessionId:h,inputIndices:f,inputs:O,outputIndices:g,options:s}=a;kr(h,f,O,g,new Array(g.length).fill(null),s).then(T=>{T.some(U=>U[3]!=="cpu")?postMessage({type:d,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:d,out:T},Nr([...O,...T]))},T=>{postMessage({type:d,err:T})});break}case"end-profiling":Wr(a),postMessage({type:d});break;default:}}catch(h){postMessage({type:d,err:h})}};})();\n'});var nt,Se,Rt,tr,rr,Ur,Br,pt,mt,wo,er,ba,Oa,va,Ta,_a,Ea,Sa,Lr=W(()=>{"use strict";tt();Zt();rt();nt=()=>!!j.wasm.proxy&&typeof document<"u",Rt=!1,tr=!1,rr=!1,Br=new Map,pt=(n,r)=>{let t=Br.get(n);t?t.push(r):Br.set(n,[r])},mt=()=>{if(Rt||!tr||rr||!Se)throw new Error("worker not ready")},wo=n=>{switch(n.data.type){case"init-wasm":Rt=!1,n.data.err?(rr=!0,Ur[1](n.data.err)):(tr=!0,Ur[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let r=Br.get(n.data.type);n.data.err?r.shift()[1](n.data.err):r.shift()[0](n.data.out);break}default:}},er=typeof document<"u"?document?.currentScript?.src:void 0,ba=async()=>{if(!tr){if(Rt)throw new Error("multiple calls to 'initWasm()' detected.");if(rr)throw new Error("previous call to 'initWasm()' failed.");if(Rt=!0,nt())return j.wasm.wasmPaths===void 0&&er&&er.indexOf("blob:")!==0&&(j.wasm.wasmPaths=er.substr(0,+er.lastIndexOf("/")+1)),new Promise((n,r)=>{Se?.terminate();let t=URL.createObjectURL(new Blob([wa()],{type:"text/javascript"}));Se=new Worker(t,{name:"ort-wasm-proxy-worker"}),Se.onerror=a=>r(a),Se.onmessage=wo,URL.revokeObjectURL(t),Ur=[n,r];let u={type:"init-wasm",in:j};Se.postMessage(u)});try{await la(j.wasm),await ca(j),tr=!0}catch(n){throw rr=!0,n}finally{Rt=!1}}},Oa=async n=>{if(nt())return mt(),new Promise((r,t)=>{pt("init-ep",[r,t]);let u={type:"init-ep",in:{epName:n,env:j}};Se.postMessage(u)});await da(j,n)},va=async n=>nt()?(mt(),new Promise((r,t)=>{pt("copy-from",[r,t]);let u={type:"copy-from",in:{buffer:n}};Se.postMessage(u,[n.buffer])})):Pt(n),Ta=async(n,r)=>{if(nt()){if(r?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return mt(),new Promise((t,u)=>{pt("create",[t,u]);let a={type:"create",in:{model:n,options:{...r}}},c=[];n instanceof Uint8Array&&c.push(n.buffer),Se.postMessage(a,c)})}else return pa(n,r)},_a=async n=>{if(nt())return mt(),new Promise((r,t)=>{pt("release",[r,t]);let u={type:"release",in:n};Se.postMessage(u)});ma(n)},Ea=async(n,r,t,u,a,c)=>{if(nt()){if(t.some(l=>l[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(a.some(l=>l))throw new Error("pre-allocated output tensor is not supported for proxy.");return mt(),new Promise((l,s)=>{pt("run",[l,s]);let h=t,m={type:"run",in:{sessionId:n,inputIndices:r,inputs:h,outputIndices:u,options:c}};Se.postMessage(m,ya(h))})}else return ha(n,r,t,u,a,c)},Sa=async n=>{if(nt())return mt(),new Promise((r,t)=>{pt("end-profiling",[r,t]);let u={type:"end-profiling",in:n};Se.postMessage(u)});ga(n)}});var at,ar,nr,kr=W(()=>{"use strict";tt();Lr();Qt();Fr();at=(n,r)=>{switch(n.location){case"cpu":return[n.type,n.dims,n.data,"cpu"];case"gpu-buffer":return[n.type,n.dims,{gpuBuffer:n.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${n.location} for ${r()}`)}},ar=n=>{switch(n[3]){case"cpu":return new ce(n[0],n[2],n[1]);case"gpu-buffer":{let r=n[0];if(!Xt(r))throw new Error(`not supported data type: ${r} for deserializing GPU tensor`);let{gpuBuffer:t,download:u,dispose:a}=n[2];return ce.fromGpuBuffer(t,{dataType:r,dims:n[1],download:u,dispose:a})}default:throw new Error(`invalid data location: ${n[3]}`)}},nr=class{async fetchModelAndCopyToWasmMemory(r){return va(await Ct(r))}async loadModel(r,t){ze();let u;typeof r=="string"?typeof process<"u"&&process.versions&&process.versions.node?u=await Ct(r):u=await this.fetchModelAndCopyToWasmMemory(r):u=r,[this.sessionId,this.inputNames,this.outputNames]=await Ta(u,t),je()}async dispose(){return _a(this.sessionId)}async run(r,t,u){ze();let a=[],c=[];Object.entries(r).forEach(O=>{let A=O[0],C=O[1],S=this.inputNames.indexOf(A);if(S===-1)throw new Error(`invalid input '${A}'`);a.push(C),c.push(S)});let l=[],s=[];Object.entries(t).forEach(O=>{let A=O[0],C=O[1],S=this.outputNames.indexOf(A);if(S===-1)throw new Error(`invalid output '${A}'`);l.push(C),s.push(S)});let h=a.map((O,A)=>at(O,()=>`input "${this.inputNames[c[A]]}"`)),m=l.map((O,A)=>O?at(O,()=>`output "${this.outputNames[s[A]]}"`):null),y=await Ea(this.sessionId,c,h,s,m,u),w={};for(let O=0;O<y.length;O++)w[this.outputNames[s[O]]]=l[O]??ar(y[O]);return je(),w}startProfiling(){}endProfiling(){Sa(this.sessionId)}}});var bo,or,Aa=W(()=>{"use strict";tt();Lr();kr();bo=()=>{if((typeof j.wasm.initTimeout!="number"||j.wasm.initTimeout<0)&&(j.wasm.initTimeout=0),typeof j.wasm.simd!="boolean"&&(j.wasm.simd=!0),typeof j.wasm.proxy!="boolean"&&(j.wasm.proxy=!1),typeof j.wasm.trace!="boolean"&&(j.wasm.trace=!1),typeof j.wasm.numThreads!="number"||!Number.isInteger(j.wasm.numThreads)||j.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(j.wasm.numThreads=1);let n=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;j.wasm.numThreads=Math.min(4,Math.ceil((n||1)/2))}},or=class{async init(r){bo(),await ba(),await Oa(r)}async createInferenceSessionHandler(r,t){let u=new nr;return await u.loadModel(r,t),Promise.resolve(u)}}});var Ie,ve,Ca,Oo,Ma,Nr,Pa,sr,Ra,xa,Ia,Da,Fa,Hr,Ua,Ba,La,ka=W(()=>{"use strict";xr();Ir();Qt();Zt();rt();St();Ie="Built without training API's enabled. Use the onnxruntime-web/training import for training functionality, and make sure that all the correct artifacts are built & moved to the correct folder if using a custom build. Check https://onnxruntime.ai/docs/build/web.html for more information.",ve=(n,r,t=!0)=>{t&&n!==0?q(r):!t&&n===0&&q(r)},Ca=n=>{let r=G(),[t,u]=n,a=0;try{if(r._OrtTrainingLoadCheckpoint)a=r._OrtTrainingLoadCheckpoint(t,u);else throw new Error(Ie);return ve(a,"Error occurred when trying to create a CheckpointState",!1),a}catch(c){throw r._OrtTrainingReleaseCheckpoint&&a!==0&&r._OrtTrainingReleaseCheckpoint(a),c}finally{r._OrtFree(n[0])}},Oo=(n,r)=>{let t=G(),u=t.stackSave();try{let a=t.stackAlloc(8);if(t._OrtTrainingGetModelInputOutputCount){let c=t._OrtTrainingGetModelInputOutputCount(n,a,a+4,r);return ve(c,"Can't get session input/output count."),[t.HEAP32[a/4],t.HEAP32[a/4+1]]}else throw new Error(Ie)}finally{t.stackRestore(u)}},Ma=(n,r,t,u)=>{let a=[],c=G();for(let l=0;l<r;l++)if(c._OrtTrainingGetModelInputOutputName){let s=c._OrtTrainingGetModelInputOutputName(n,l,t,u);ve(s,`Can't get input or output name -- is input: ${t}, index ${l}`,!1),a.push(c.UTF8ToString(s)),c._free(s)}else throw new Error(Ie);return a},Nr=(n,r)=>{let t=[],u=[],[a,c]=Oo(n,r);return t=Ma(n,a,!0,r),u=Ma(n,c,!1,r),[t,u]},Pa=(n,r,t,u,a)=>{let c=G(),l=0,s=0,h=[];try{if([s,h]=qt(a),c._OrtTrainingCreateSession)l=c._OrtTrainingCreateSession(s,n,r[0],r[1],t[0],t[1],u[0],u[1]);else throw new Error(Ie);return ve(l,"Error occurred when trying to create a TrainingSession",!1),l}catch(m){throw c._OrtTrainingReleaseSession&&l!==0&&c._OrtTrainingReleaseSession(l),m}finally{c._free(r[0]),c._free(t[0]),c._free(u[0]),s!==0&&c._OrtReleaseSessionOptions(s),h.forEach(m=>c._free(m))}},sr=(n,r,t,u,a,c)=>{let l=r.length;for(let y=0;y<l;y++)Kt(t[y],u,a,n,c+r[y]);let s=G(),h=s.stackAlloc(l*4),m=h/4;for(let y=0;y<l;y++)s.HEAPU32[m++]=u[y];return h},Ra=(n,r,t,u)=>{let a=G(),c=[];for(let l=0;l<r;l++){let s=a.HEAPU32[n/4+l];if(s===t[l]){c.push(u[l]);continue}let h=a.stackSave(),m=a.stackAlloc(4*4),y,w=0;try{let O=a._OrtGetTensorData(s,m,m+4,m+8,m+12);ve(O,`Can't access output tensor data on index ${l}.`);let A=m/4,C=a.HEAPU32[A++];w=a.HEAPU32[A++];let S=a.HEAPU32[A++],R=a.HEAPU32[A++],P=[];for(let B=0;B<R;B++)P.push(a.HEAPU32[S/4+B]);a._OrtFree(S);let F=P.reduce((B,$)=>B*$,1);if(y=Jt(C),y==="string"){let B=[],$=w/4;for(let X=0;X<F;X++){let Q=a.HEAPU32[$++],D=X===F-1?void 0:a.HEAPU32[$]-Q;B.push(a.UTF8ToString(Q,D))}c.push([y,P,B,"cpu"])}else{let B=At(y),$=new B(F);new Uint8Array($.buffer,$.byteOffset,$.byteLength).set(a.HEAPU8.subarray(w,w+$.byteLength)),c.push([y,P,$,"cpu"])}}finally{a.stackRestore(h),y==="string"&&w&&a._free(w),a._OrtReleaseTensor(s)}}return c},xa=async n=>{let r=G();if(r._OrtTrainingLazyResetGrad){let t=r._OrtTrainingLazyResetGrad(n);ve(t,"Can't call lazyResetGrad.")}else throw new Error(Ie)},Ia=async(n,r,t,u,a,c)=>{let l=G(),s=r.length,h=u.length,m=0,y=[],w=[],O=[],A=[],C=l.stackSave();try{[m,y]=ft(c);let S=sr(n,r,t,w,A,0),R=sr(n,u,a,O,A,s);if(l._OrtTrainingRunTrainStep){let P=l._OrtTrainingRunTrainStep(n,S,s,R,h,m);ve(P,"failed to call OrtTrainingRunTrainStep in the WebAssembly layer")}else throw new Error(Ie);return Ra(R,h,O,a)}finally{l.stackRestore(C),w.forEach(S=>l._OrtReleaseTensor(S)),O.forEach(S=>l._OrtReleaseTensor(S)),A.forEach(S=>l._free(S)),m!==0&&l._OrtReleaseRunOptions(m),y.forEach(S=>l._free(S))}},Da=async(n,r)=>{let t=G(),u=0,a=[];try{if([u,a]=ft(r),t._OrtTrainingOptimizerStep){let c=t._OrtTrainingOptimizerStep(n,u);ve(c,"Failed to call OrtTrainingOptimizerStep in the WebAssembly layer")}else throw new Error(Ie)}finally{u!==0&&t._OrtReleaseRunOptions(u),a.forEach(c=>t._free(c))}},Fa=async(n,r,t,u,a,c)=>{let l=G(),s=r.length,h=u.length,m=0,y=[],w=[],O=[],A=[],C=l.stackSave();try{[m,y]=ft(c);let S=sr(n,r,t,w,A,0),R=sr(n,u,a,O,A,s);if(l._OrtTrainingEvalStep){let P=l._OrtTrainingEvalStep(n,S,s,R,h,m);ve(P,"failed to call OrtTrainingEvalStep in the WebAssembly layer")}else throw new Error(Ie);return Ra(R,h,O,a)}finally{l.stackRestore(C),w.forEach(S=>l._OrtReleaseTensor(S)),O.forEach(S=>l._OrtReleaseTensor(S)),A.forEach(S=>l._free(S)),m!==0&&l._OrtReleaseRunOptions(m),y.forEach(S=>l._free(S))}},Hr=(n,r)=>{let t=G(),u=t.stackSave();try{let a=t.stackAlloc(4);if(t._OrtTrainingGetParametersSize){let c=t._OrtTrainingGetParametersSize(n,a,r);return ve(c,"Can't get parameters size"),t.HEAP32[a/4]}else throw new Error(Ie)}finally{t.stackRestore(u)}},Ua=async(n,r)=>{let t=G(),u=t.stackSave(),a="float32",c="cpu",l=Hr(n,r),s=0,h=4*l,m=t._malloc(h),y=[l],w=t.stackAlloc(4),O=w/4;t.HEAP32[O]=l;try{if(s=t._OrtCreateTensor(ct(a),m,h,w,y.length,Mt(c)),ve(s,`Can't create tensor for getContiguousParameters. session=${n}.`,!1),t._OrtTrainingCopyParametersToBuffer){let R=t._OrtTrainingCopyParametersToBuffer(n,s,l,r);ve(R,"Can't get contiguous parameters.")}else throw new Error(Ie);let A=At(a),C=new A(l),S=[];if(new Uint8Array(C.buffer,C.byteOffset,C.byteLength).set(t.HEAPU8.subarray(m,m+h)),S.push([a,y,C,c]),S.length!==1)throw new Error(`something unexpected happened in the getContiguousParameters function. Expected output length of
     one, got ${S.length}`);return S[0]}finally{s!==0&&t._OrtReleaseTensor(s),t._free(m),t._free(w),t.stackRestore(u)}},Ba=async(n,r,t)=>{let u=G(),a=u.stackSave(),c="float32",l="cpu",s=r.length,h=s/4,m=u._malloc(s);u.HEAPU8.set(r,m);let y=u.stackAlloc(4);u.HEAP32[y/4]=h;let w=1,O=0;try{if(O=u._OrtCreateTensor(ct(c),m,s,y,w,Mt(l)),ve(O,`Can't create tensor for input/output. session=${n}`,!1),u._OrtTrainingCopyParametersFromBuffer){let A=u._OrtTrainingCopyParametersFromBuffer(n,O,h,t);ve(A,"Can't copy buffer to parameters.")}else throw new Error(Ie)}finally{O!==0&&u._OrtReleaseTensor(O),u.stackRestore(a),u._free(m),u._free(y)}},La=(n,r)=>{let t=G();t._OrtTrainingReleaseSession&&t._OrtTrainingReleaseSession(r),t._OrtTrainingReleaseCheckpoint&&t._OrtTrainingReleaseCheckpoint(n)}});var ir,Na=W(()=>{"use strict";kr();Zt();ka();ir=class{constructor(){this.evalInputNames=[];this.evalOutputNames=[]}async uriOrBufferToHeap(r){let t;if(typeof r=="string"){let a=await(await fetch(r)).arrayBuffer();t=new Uint8Array(a)}else t=r;return Pt(t)}async createTrainingSession(r,t,u,a,c){let l=await this.uriOrBufferToHeap(r),s=await this.uriOrBufferToHeap(t),h=[0,0],m=[0,0];u!==""&&(h=await this.uriOrBufferToHeap(u)),a!==""&&(m=await this.uriOrBufferToHeap(a)),this.checkpointId=Ca(l),this.sessionId=Pa(this.checkpointId,s,h,m,c),[this.inputNames,this.outputNames]=Nr(this.sessionId,!1),u!==""&&([this.evalInputNames,this.evalOutputNames]=Nr(this.sessionId,!0))}convertMapIntoValuesArrayAndIndicesArray(r,t,u){let a=[],c=[];Object.entries(r).forEach(s=>{let h=s[0],m=s[1],y=t.indexOf(h);if(y===-1)throw new Error(`invalid input '${h}`);a.push(m),c.push(y)});let l=a.map(u);return[a,c,l]}convertTensorMetadataToReturnType(r,t,u){let a={};for(let c=0;c<r.length;c++)a[this.outputNames[u[c]]]=t[c]??ar(r[c]);return a}async lazyResetGrad(){await xa(this.sessionId)}async runTrainStep(r,t,u){let[,a,c]=this.convertMapIntoValuesArrayAndIndicesArray(r,this.inputNames,(y,w)=>at(y,()=>`input "${this.inputNames[a[w]]}"`)),[l,s,h]=this.convertMapIntoValuesArrayAndIndicesArray(t,this.outputNames,(y,w)=>y?at(y,()=>`output "${this.outputNames[s[w]]}"`):null),m=await Ia(this.sessionId,a,c,s,h,u);return this.convertTensorMetadataToReturnType(m,l,s)}async runOptimizerStep(r){await Da(this.sessionId,r)}async runEvalStep(r,t,u){let[,a,c]=this.convertMapIntoValuesArrayAndIndicesArray(r,this.evalInputNames,(y,w)=>at(y,()=>`input "${this.evalInputNames[a[w]]}"`)),[l,s,h]=this.convertMapIntoValuesArrayAndIndicesArray(t,this.evalOutputNames,(y,w)=>y?at(y,()=>`output "${this.evalOutputNames[s[w]]}"`):null),m=await Fa(this.sessionId,a,c,s,h,u);return this.convertTensorMetadataToReturnType(m,l,s)}async getParametersSize(r){return Hr(this.sessionId,r)}async loadParametersBuffer(r,t){await Ba(this.sessionId,r,t)}async getContiguousParameters(r){let t=await Ua(this.sessionId,r);return ar(t)}async dispose(){return La(this.checkpointId,this.sessionId)}}});var Ha={};ut(Ha,{wasmBackend:()=>vo});var Wr,vo,Wa=W(()=>{"use strict";Aa();Na();Wr=class extends or{async createTrainingSessionHandler(r,t,u,a,c){let l=new ir;return await l.createTrainingSession(r,t,u,a,c),Promise.resolve(l)}},vo=new Wr});var _o={};ut(_o,{InferenceSession:()=>Nn,TRACE:()=>Or,TRACE_FUNC_BEGIN:()=>ze,TRACE_FUNC_END:()=>je,Tensor:()=>ce,TrainingSession:()=>Yn,default:()=>To,env:()=>j,registerBackend:()=>lt});tt();tt();tt();var qn="1.18.0";var To=Tr;{let n=(Wa(),Ke(Ha)).wasmBackend;lt("cpu",n,10),lt("wasm",n,10)}Object.defineProperty(j.versions,"web",{value:qn,enumerable:!0});return Ke(_o);})();
//# sourceMappingURL=ort.training.wasm.min.js.map
